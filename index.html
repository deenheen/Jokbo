<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Study Aid (Demo)</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* --- 1. ê¸°ë³¸ ìŠ¤íƒ€ì¼ (Reset) --- */
        :root {
            --primary: #4F46E5;       /* ë©”ì¸ ì»¬ëŸ¬ (ë³´ë¼/ë‚¨ìƒ‰ ê³„ì—´) */
            --bg-gray: #f3f4f6;       /* ì „ì²´ ë°°ê²½ */
            --paper: #ffffff;         /* ë¬¸ì„œ ë°°ê²½ */
            --highlight-bg: #fef08a;  /* í˜•ê´‘íœ ë°°ê²½ (ë…¸ë‘) */
            --highlight-border: #eab308; /* í˜•ê´‘íœ ë°‘ì¤„ */
            --border-color: #e5e7eb;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-gray);
            height: 100vh; /* í™”ë©´ ì „ì²´ ë†’ì´ ì‚¬ìš© */
            display: flex; /* ì¢Œìš° ë¶„í• ì˜ í•µì‹¬ */
            overflow: hidden; /* ì „ì²´ ìŠ¤í¬ë¡¤ ë°©ì§€ (ì˜ì—­ë³„ ìŠ¤í¬ë¡¤ ìœ„í•¨) */
        }

        /* --- 2. ì™¼ìª½: ê°•ì˜ë¡ ë·°ì–´ ì˜ì—­ (Viewer) --- */
        .viewer-container {
            flex: 1; /* ë‚¨ì€ ë„ˆë¹„ ëª¨ë‘ ì°¨ì§€ */
            display: flex;
            justify-content: center;
            padding: 40px;
            overflow-y: auto; /* ë‚´ìš©ì´ ê¸¸ë©´ ì´ ì•ˆì—ì„œë§Œ ìŠ¤í¬ë¡¤ */
            background-color: #f8fafc;
        }

        .paper-doc {
            width: 100%;
            max-width: 850px; /* A4 ìš©ì§€ ëŠë‚Œì˜ ìµœëŒ€ ë„ˆë¹„ */
            background: var(--paper);
            padding: 60px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            color: #333;
            line-height: 1.8;
            height: fit-content; /* ë‚´ìš©ë§Œí¼ë§Œ ë†’ì´ ì°¨ì§€ */
        }

        .paper-doc h1 { 
            font-size: 2.2rem; margin-bottom: 20px; color: var(--primary); 
            border-bottom: 2px solid var(--border-color); padding-bottom: 15px; 
        }
        
        .paper-doc p { margin-bottom: 24px; font-size: 1.1rem; word-break: keep-all; }

        /* í•˜ì´ë¼ì´íŠ¸ íš¨ê³¼ (ê¸°ë³¸ì€ íˆ¬ëª…) */
        .highlight-text {
            background: transparent;
            border-bottom: 2px solid transparent;
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
            padding: 2px 0;
        }
        
        /* í™œì„±í™” ì‹œ ìŠ¤íƒ€ì¼ */
        .highlight-text.active {
            background-color: var(--highlight-bg);
            border-bottom: 2px solid var(--highlight-border);
            font-weight: 700;
        }

        /* íˆ´íŒ (ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ ë¬¸ì œ ë³´ì´ê¸°) */
        .highlight-text:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%; left: 50%; transform: translateX(-50%);
            background: #1f2937; color: white;
            padding: 8px 12px; border-radius: 6px;
            font-size: 13px; width: 280px;
            z-index: 100; pointer-events: none; margin-bottom: 6px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* --- 3. ì˜¤ë¥¸ìª½: ì‚¬ì´ë“œë°” ì˜ì—­ (Sidebar) --- */
        .sidebar-container {
            width: 400px; /* ê³ ì • ë„ˆë¹„ */
            background: white;
            border-left: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            box-shadow: -2px 0 10px rgba(0,0,0,0.03);
            z-index: 10;
        }

        /* íƒ­ ë©”ë‰´ */
        .tabs { display: flex; border-bottom: 1px solid var(--border-color); background: #fff; }
        .tab-btn {
            flex: 1; padding: 16px; border: none; background: none;
            font-weight: 600; color: #6b7280; cursor: pointer; transition: 0.2s;
            border-bottom: 3px solid transparent;
        }
        .tab-btn:hover { background: #f9fafb; }
        .tab-btn.active { color: var(--primary); border-bottom-color: var(--primary); }

        /* íƒ­ ë‚´ìš©ë¬¼ */
        .tab-content {
            flex: 1; padding: 20px; overflow-y: auto; display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ */
        }
        .tab-content.show { display: block; }
        /* ì±„íŒ… íƒ­ì€ Flex ë ˆì´ì•„ì›ƒ í•„ìš” */
        .tab-content.flex-layout { display: none; flex-direction: column; }
        .tab-content.flex-layout.show { display: flex; }

        /* ì¡±ë³´ ì—…ë¡œë“œ ë°•ìŠ¤ */
        .upload-area {
            border: 2px dashed #cbd5e1; border-radius: 12px;
            padding: 40px 20px; text-align: center;
            cursor: pointer; transition: 0.2s; margin-top: 20px;
        }
        .upload-area:hover { border-color: var(--primary); background: #eff6ff; }

        /* ì¡±ë³´ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ */
        .match-card {
            background: #fff; border: 1px solid var(--border-color);
            border-left: 5px solid #22c55e; /* ì´ˆë¡ìƒ‰ í¬ì¸íŠ¸ */
            padding: 16px; border-radius: 8px; margin-bottom: 12px;
            cursor: pointer; transition: transform 0.2s;
        }
        .match-card:hover { transform: translateY(-3px); box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        .match-tag {
            font-size: 11px; background: #e0f2fe; color: #0369a1;
            padding: 3px 8px; border-radius: 99px; font-weight: bold;
            display: inline-block; margin-bottom: 6px;
        }

        /* ì±„íŒ… ìŠ¤íƒ€ì¼ */
        .chat-box { flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 15px; }
        .msg { padding: 12px 16px; border-radius: 16px; max-width: 85%; font-size: 14px; line-height: 1.5; }
        .msg.ai { background: #f3f4f6; color: #1f2937; align-self: flex-start; border-top-left-radius: 4px; }
        .msg.user { background: var(--primary); color: white; align-self: flex-end; border-top-right-radius: 4px; }
        
        .chat-input-area {
            border-top: 1px solid var(--border-color); padding: 15px;
            display: flex; gap: 8px; background: white;
        }
        .chat-input {
            flex: 1; padding: 12px; border: 1px solid #d1d5db;
            border-radius: 24px; outline: none;
        }
        .send-btn {
            width: 44px; height: 44px; background: var(--primary); color: white;
            border: none; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center;
        }

        /* ì €ì¥ ë²„íŠ¼ */
        .save-note-btn {
            display: inline-block; margin-top: 8px; font-size: 11px;
            padding: 4px 10px; background: white; border: 1px solid #d1d5db;
            border-radius: 12px; cursor: pointer; color: #374151;
        }
        .save-note-btn:hover { background: #f9fafb; border-color: var(--primary); color: var(--primary); }

        /* ê¹œë¹¡ì„ ì• ë‹ˆë©”ì´ì…˜ (ì´ë™ ì‹œ) */
        .flash-anim { animation: flash 1.5s ease; }
        @keyframes flash {
            0% { background-color: rgba(255, 255, 0, 0.4); }
            100% { background-color: transparent; }
        }
    </style>
</head>
<body>

    <main class="viewer-container">
        <div class="paper-doc">
            <h1>Evidence That Viral DNA Can Program Cells</h1>
            <p style="color:#666; font-size: 14px; border-bottom:1px solid #eee; padding-bottom:10px;">
                Page 1 / Chapter 3: Molecular Genetics
            </p>

            <br>
            <h3>1. Introduction to Viral DNA</h3>
            <p>
                More evidence for DNA as the genetic material came from studies of viruses that infect bacteria.
                Such viruses, called 
                <span class="highlight-text" id="loc-1" data-tooltip="[Q14] Bacteriophagesì˜ ì •ì˜ì™€ ë¶„ììœ ì „í•™ì—ì„œì˜ ì—­í• ì€?">bacteriophages (or phages)</span>, 
                are widely used in molecular genetics research.
            </p>

            <p>
                A virus is DNA (or RNA) enclosed by a protective protein coat. 
                Viruses must infect cells and take over the cells' metabolic machinery in order to reproduce.
            </p>

            <h3>2. The Hershey-Chase Experiment</h3>
            <p>
                Alfred Hershey and Martha Chase showed that the genetic material of a phage known as T2 is DNA.
                They designed an experiment showing that only the 
                <span class="highlight-text" id="loc-2" data-tooltip="[ì„œìˆ í˜•] Hershey-Chase ì‹¤í—˜ì—ì„œ ë‹¨ë°±ì§ˆì´ ì•„ë‹Œ DNAê°€ ìœ ì „ë¬¼ì§ˆì„ì„ ì¦ëª…í•œ ê·¼ê±°ëŠ”?">DNA of the T2 phage</span>, 
                and not the protein, enters an <em>E. coli</em> cell during infection.
            </p>

            <p id="loc-3">
                This experiment concluded that the injected DNA of the phage provides the genetic information.
            </p>
        </div>
    </main>

    <aside class="sidebar-container">
        <nav class="tabs">
            <button class="tab-btn active" onclick="changeTab('jokbo', this)">
                <i class="fas fa-list-check"></i> ì¡±ë³´ ë§¤ì¹­
            </button>
            <button class="tab-btn" onclick="changeTab('ai', this)">
                <i class="fas fa-robot"></i> AI íŠœí„°
            </button>
            <button class="tab-btn" onclick="changeTab('saved', this)">
                <i class="fas fa-bookmark"></i> ì €ì¥ë¨
            </button>
        </nav>

        <div id="tab-jokbo" class="tab-content show">
            <div id="upload-panel" class="upload-area" onclick="startAnalysis()">
                <i class="fas fa-file-upload fa-3x" style="color:#94a3b8; margin-bottom:15px;"></i><br>
                <b>ì¡±ë³´ íŒŒì¼ ì—…ë¡œë“œ (Demo)</b><br>
                <span style="font-size:12px; color:#64748b;">í´ë¦­í•˜ë©´ ë¶„ì„ì„ ì‹œì‘í•©ë‹ˆë‹¤.</span>
            </div>

            <div id="result-panel" style="display: none;">
                <h4 style="margin: 10px 0 20px 0; color:#333;">
                    <i class="fas fa-check-circle" style="color:#22c55e;"></i> ë¶„ì„ ê²°ê³¼: 2ê±´ ë§¤ì¹­
                </h4>

                <div class="match-card" onclick="moveToLoc('loc-1')">
                    <span class="match-tag">2023 ê¸°ë§ê³ ì‚¬ Q14</span>
                    <div style="font-weight:bold; font-size:15px; margin-bottom:5px;">Bacteriophages ì •ì˜</div>
                    <div style="font-size:12px; color:#666;">ê°•ì˜ë¡ ìƒë‹¨ ì •ì˜ ë¶€ë¶„ê³¼ ì—°ê´€ë¨</div>
                </div>

                <div class="match-card" onclick="moveToLoc('loc-2')">
                    <span class="match-tag">2024 ì¤‘ê°„ê³ ì‚¬ ì„œìˆ í˜•</span>
                    <div style="font-weight:bold; font-size:15px; margin-bottom:5px;">Hershey-Chase ì‹¤í—˜</div>
                    <div style="font-size:12px; color:#666;">DNA ìœ ì „ë¬¼ì§ˆ ì¦ëª… ì‹¤í—˜ ë‚´ìš©</div>
                </div>
            </div>
        </div>

        <div id="tab-ai" class="tab-content flex-layout">
            <div class="chat-box" id="chat-container">
                <div class="msg ai">
                    ì•ˆë…•í•˜ì„¸ìš”! ì¡±ë³´ì™€ ê°•ì˜ë¡ì„ ë¶„ì„í–ˆìŠµë‹ˆë‹¤. <br>
                    <b>"ì´ í˜ì´ì§€ ì¡±ë³´ ì¤‘ìš” ë‚´ìš© ìš”ì•½í•´ì¤˜"</b>ë¼ê³  ë¬¼ì–´ë³´ì„¸ìš”.
                </div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="user-input" class="chat-input" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..." onkeypress="if(event.key==='Enter') sendMessage()">
                <button class="send-btn" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>

        <div id="tab-saved" class="tab-content">
            <div id="saved-list">
                <div style="text-align:center; color:#999; margin-top:50px;">
                    <i class="far fa-folder-open fa-3x" style="opacity:0.3"></i><br><br>
                    ì €ì¥ëœ ë…¸íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.<br>
                    ì±„íŒ…ì°½ì—ì„œ 'ì €ì¥' ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.
                </div>
            </div>
        </div>
    </aside>

    <script>
        // --- ê¸°ëŠ¥ êµ¬í˜„ (Vanilla JS) ---

        // 1. íƒ­ ì „í™˜ ê¸°ëŠ¥
        function changeTab(targetId, btnEl) {
            // ë²„íŠ¼ í™œì„±í™” ìŠ¤íƒ€ì¼ ë³€ê²½
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btnEl.classList.add('active');

            // ë‚´ìš© ë³´ì´ê¸°/ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.tab-content').forEach(c => {
                c.classList.remove('show');
                if(c.id === 'tab-ai') c.style.display = 'none'; // flex íƒ­ ì´ˆê¸°í™”
            });

            const target = document.getElementById('tab-' + targetId);
            if (targetId === 'ai') {
                target.style.display = 'flex'; // AI íƒ­ì€ flexë¡œ í‘œì‹œ
            } else {
                target.classList.add('show');
            }
        }

        // 2. ì¡±ë³´ ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜
        function startAnalysis() {
            const uploadPanel = document.getElementById('upload-panel');
            uploadPanel.innerHTML = '<i class="fas fa-spinner fa-spin fa-2x"></i><br><br>ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...';
            
            setTimeout(() => {
                uploadPanel.style.display = 'none';
                document.getElementById('result-panel').style.display = 'block';
                
                // ì™¼ìª½ ê°•ì˜ë¡ì— í˜•ê´‘íœ ì¹ í•˜ê¸°
                document.querySelectorAll('.highlight-text').forEach(el => {
                    el.classList.add('active');
                });

                alert("ë¶„ì„ ì™„ë£Œ! ê°•ì˜ë¡ì— ë…¸ë€ìƒ‰ í˜•ê´‘íœì´ í‘œì‹œë˜ì—ˆìŠµë‹ˆë‹¤.");
            }, 1200);
        }

        // 3. í•´ë‹¹ ìœ„ì¹˜ë¡œ ìŠ¤í¬ë¡¤ ì´ë™ (Deep Linking)
        function moveToLoc(id) {
            const el = document.getElementById(id);
            if(el) {
                el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                // ê¹œë¹¡ì„ íš¨ê³¼
                el.closest('p').classList.add('flash-anim');
                setTimeout(() => el.closest('p').classList.remove('flash-anim'), 1600);
            }
        }

        // 4. ì±„íŒ… ê¸°ëŠ¥
        function sendMessage() {
            const input = document.getElementById('user-input');
            const text = input.value.trim();
            if(!text) return;

            // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
            addMsg('user', text);
            input.value = '';

            // AI ë‹µë³€ ì‹œë®¬ë ˆì´ì…˜
            setTimeout(() => {
                let reply = "ì£„ì†¡í•´ìš”, ê·¸ ë‚´ìš©ì€ ê°•ì˜ë¡ì— ì—†ìŠµë‹ˆë‹¤.";
                if(text.includes('ì¡±ë³´') || text.includes('ìš”ì•½')) {
                    reply = "ì´ í˜ì´ì§€ì˜ í•µì‹¬ ì¡±ë³´ëŠ” <b>Bacteriophagesì˜ ì—­í• </b>ê³¼ <b>Hershey-Chase ì‹¤í—˜ ê²°ê³¼</b>ì…ë‹ˆë‹¤. íŠ¹íˆ ì„œìˆ í˜• ë¬¸ì œë¡œ ìì£¼ ì¶œì œë˜ë‹ˆ ì‹¤í—˜ ê³¼ì •ì„ ê¼­ ì•”ê¸°í•˜ì„¸ìš”!";
                } else if(text.includes('ì‹¤í—˜') || text.includes('DNA')) {
                    reply = "Hershey-Chase ì‹¤í—˜ì€ ë°©ì‚¬ì„± ë™ìœ„ì›ì†Œë¥¼ ì´ìš©í•˜ì—¬ ë‹¨ë°±ì§ˆì´ ì•„ë‹Œ DNAê°€ ì„¸í¬ ë‚´ë¡œ ë“¤ì–´ê°ì„ ì¦ëª…í–ˆìŠµë‹ˆë‹¤.";
                }
                
                addMsg('ai', reply, true);
            }, 700);
        }

        function addMsg(type, html, showSave = false) {
            const container = document.getElementById('chat-container');
            const div = document.createElement('div');
            div.className = `msg ${type}`;
            
            let btnHtml = '';
            if(showSave) {
                // ì €ì¥ ë²„íŠ¼ìš© í…ìŠ¤íŠ¸ ì¶”ì¶œ (HTML íƒœê·¸ ì œê±°)
                const plainText = html.replace(/<[^>]*>?/gm, '');
                btnHtml = `<br><button class="save-note-btn" onclick="saveNote('${plainText.substring(0,15)}...')">ğŸ“Œ ë…¸íŠ¸ì— ì €ì¥</button>`;
            }

            div.innerHTML = html + btnHtml;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        // 5. ë…¸íŠ¸ ì €ì¥ ê¸°ëŠ¥
        function saveNote(text) {
            const list = document.getElementById('saved-list');
            if(list.innerText.includes('ì €ì¥ëœ ë…¸íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤')) {
                list.innerHTML = '';
            }
            
            const item = document.createElement('div');
            item.className = 'match-card'; // ê¸°ì¡´ ì¹´ë“œ ìŠ¤íƒ€ì¼ ì¬ì‚¬ìš©
            item.innerHTML = `
                <div style="font-weight:bold; font-size:14px;">${text}</div>
                <div style="font-size:11px; color:#888; margin-top:5px;">AI ì±„íŒ…ì—ì„œ ì €ì¥ë¨</div>
            `;
            
            list.prepend(item);
            
            // ì €ì¥ ì•Œë¦¼ ì‹œê°íš¨ê³¼ (íƒ­ ë²„íŠ¼ ê¹œë¹¡ì„ ë“±)
            const saveTabBtn = document.querySelectorAll('.tab-btn')[2];
            saveTabBtn.style.color = '#e11d48';
            setTimeout(() => saveTabBtn.style.color = '', 500);
        }
    </script>
</body>
</html>
