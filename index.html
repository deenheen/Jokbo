<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Med-Study OS v6.0 (High Fidelity)</title>
    <style>
        /* [ê¸°ë³¸ ìŠ¤íƒ€ì¼] */
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Pretendard', sans-serif; }
        body { background-color: #e9ecef; height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden; }

        /* íƒœë¸”ë¦¿ í”„ë ˆì„ */
        .tablet-frame {
            width: 1400px; height: 900px; background: white; border-radius: 20px;
            box-shadow: 0 30px 80px rgba(0,0,0,0.2); border: 10px solid #222; display: flex; overflow: hidden;
        }

        /* --- ì™¼ìª½: PDF ë·°ì–´ (Full Size) --- */
        .left-panel {
            flex: 1.5; background-color: #525659; display: flex; flex-direction: column;
            border-right: 1px solid #ddd; position: relative;
        }
        
        .pdf-header {
            height: 50px; background: #323639; color: #f1f1f1; display: flex; align-items: center;
            padding: 0 20px; justify-content: space-between; font-size: 14px; z-index: 10;
        }

        .pdf-viewer-container {
            flex: 1; position: relative; overflow: hidden; background: #525659;
            display: flex; justify-content: center; align-items: center;
        }

        .pdf-page {
            width: 95%; height: 95%; background: white; box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            padding: 50px; position: absolute; display: none; flex-direction: column;
            overflow-y: auto; border-radius: 4px;
        }
        .pdf-page.active { display: flex; animation: slideIn 0.3s ease-out; }

        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }

        /* PDF ë‚´ë¶€ ìŠ¤íƒ€ì¼ (ë¦¬ì–¼í•˜ê²Œ) */
        .page-num { position: absolute; bottom: 20px; right: 20px; color: #999; font-size: 12px; }
        .pdf-title { font-size: 26px; font-weight: 800; margin-bottom: 25px; color: #1a237e; border-bottom: 3px solid #1a237e; padding-bottom: 15px; }
        .pdf-h2 { font-size: 18px; font-weight: 700; color: #0d47a1; margin-top: 20px; margin-bottom: 10px; border-left: 4px solid #2196f3; padding-left: 10px; }
        .pdf-text { font-size: 15px; line-height: 1.7; color: #333; text-align: justify; margin-bottom: 15px; }
        .highlight-box { background: #e3f2fd; padding: 15px; border-radius: 8px; border: 1px solid #bbdefb; font-size: 14px; margin: 15px 0; }
        .important { color: #d32f2f; font-weight: bold; }

        /* ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ */
        .nav-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: 50px; height: 50px; background: rgba(0,0,0,0.6); color: white;
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            cursor: pointer; font-size: 24px; z-index: 100; transition: 0.2s; user-select: none;
        }
        .nav-btn:hover { background: rgba(0,0,0,0.8); transform: translateY(-50%) scale(1.1); }
        .nav-prev { left: 20px; } .nav-next { right: 20px; }
        .nav-btn.disabled { opacity: 0.2; cursor: default; pointer-events: none; }

        /* ë“œë˜ê·¸ëœ ë©”ëª¨ */
        .dropped-note {
            position: absolute; width: 240px; background-color: #fff9c4; border-left: 5px solid #fbc02d;
            padding: 12px; font-size: 13px; color: #333; box-shadow: 2px 4px 10px rgba(0,0,0,0.15);
            border-radius: 0 8px 8px 0; cursor: pointer; z-index: 50; line-height: 1.4;
        }
        .dropped-note:hover { transform: scale(1.05); }

        /* --- ì˜¤ë¥¸ìª½: íŒ¨ë„ --- */
        .right-panel {
            flex: 0.7; display: flex; flex-direction: column; background: #f8f9fa; border-left: 1px solid #ddd; position: relative;
        }
        .tabs { display: flex; border-bottom: 1px solid #ddd; background: white; flex-shrink: 0; }
        .tab { flex: 1; padding: 15px 5px; text-align: center; cursor: pointer; font-weight: bold; color: #888; font-size: 14px; }
        .tab.active { color: #2196f3; border-bottom: 3px solid #2196f3; background: #f0f7ff; }
        
        .tab-content-container { flex: 1; overflow-y: auto; position: relative; scroll-behavior: smooth; }
        .tab-content { display: none; padding: 20px; padding-bottom: 80px; }
        .tab-content.active { display: block; }

        /* [ì±„íŒ… ìŠ¤íƒ€ì¼] */
        .chat-container { display: flex; flex-direction: column; gap: 15px; }
        .msg-date { text-align: center; font-size: 11px; color: #aaa; margin: 15px 0; position: relative; }
        .msg-date::before, .msg-date::after { content:""; position: absolute; top: 50%; width: 35%; height: 1px; background: #ddd; }
        .msg-date::before { left: 0; } .msg-date::after { right: 0; }
        
        .bubble { max-width: 90%; padding: 12px 14px; border-radius: 12px; font-size: 13px; line-height: 1.5; transition: background 0.5s; }
        .user-msg { align-self: flex-end; background: #e9ecef; color: #333; border-bottom-right-radius: 2px; }
        .ai-msg { align-self: flex-start; background: #e3f2fd; color: #0d47a1; border-bottom-left-radius: 2px; cursor: grab; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .ai-msg strong { color: #1565c0; }

        /* [ì¡±ë³´ ìŠ¤íƒ€ì¼ - Case Study] */
        .jokbo-card { background: white; padding: 18px; border-radius: 8px; border: 1px solid #e0e0e0; margin-bottom: 12px; display: none; transition: 0.2s; }
        .jokbo-card:hover { border-color: #2196f3; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .jokbo-card.visible { display: block; animation: fadeIn 0.5s; }
        .badge { display: inline-block; padding: 3px 8px; background: #e8eaf6; color: #3949ab; font-size: 11px; border-radius: 4px; font-weight: bold; margin-bottom: 8px; margin-right: 5px; }
        .badge.kmle { background: #ffebee; color: #c62828; }
        .q-text { font-size: 13px; color: #333; line-height: 1.5; font-weight: 500; }
        .options { margin-top: 10px; font-size: 12px; color: #666; padding-left: 10px; border-left: 2px solid #eee; }

        /* [ìŠ¤í¬ë¦½íŠ¸ ìŠ¤íƒ€ì¼] */
        .script-segment { background: white; padding: 15px; border-radius: 8px; border: 1px solid #eee; margin-bottom: 15px; transition: all 0.3s; }
        .script-header { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 12px; color: #666; }
        .speaker { font-weight: bold; color: #2196f3; }
        .timestamp { background: #eee; padding: 2px 6px; border-radius: 4px; font-family: monospace; }
        .script-text { font-size: 14px; line-height: 1.6; color: #424242; }
        .keyword { background: #fff9c4; padding: 0 2px; }

        /* [ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ ë°”] */
        .audio-player-bar {
            position: absolute; bottom: 0; left: 0; right: 0; height: 70px; background: white; border-top: 1px solid #ddd;
            display: flex; align-items: center; padding: 0 20px; gap: 15px; box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            display: none; z-index: 200;
        }
        .audio-player-bar.visible { display: flex; }
        .play-btn { width: 40px; height: 40px; background: #2196f3; border-radius: 50%; display: flex; justify-content: center; align-items: center; color: white; font-size: 18px; cursor: pointer; flex-shrink: 0; }
        .timeline-container { flex: 1; display: flex; flex-direction: column; gap: 6px; }
        .timeline-bar { height: 6px; background: #eee; border-radius: 3px; position: relative; overflow: hidden; }
        .timeline-progress { position: absolute; left: 0; top: 0; height: 100%; width: 0%; background: #2196f3; transition: width 0.3s linear; }
        .time-info { display: flex; justify-content: space-between; font-size: 11px; color: #888; font-family: monospace; }
        .speed-control { font-size: 14px; font-weight: bold; color: #555; cursor: pointer; flex-shrink: 0; border: 1px solid #ddd; padding: 4px 8px; border-radius: 4px; }

        .active-context-bg { background-color: #fffde7 !important; border: 2px solid #fbc02d !important; box-shadow: 0 4px 12px rgba(251, 192, 45, 0.3); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

<div class="tablet-frame">
    <div class="left-panel">
        <div class="pdf-header">
            <span>ğŸ“š [ë³¸ê³¼2] ë‚´ë¶„ë¹„í•™_Ch04_ë‹¹ë‡¨ë³‘ê¸‰ì„±í•©ë³‘ì¦.pdf</span>
            <span id="headerPageNum">Page 13 / 60</span>
        </div>
        
        <div class="pdf-viewer-container">
            <div class="nav-btn nav-prev disabled" onclick="changePage(-1)">â®</div>
            <div class="nav-btn nav-next" onclick="changePage(1)">â¯</div>

            <div class="pdf-page active" id="p13" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="page-num">13</div>
                <div class="pdf-title">Chapter 4. ë‹¹ë‡¨ë³‘ì„± ì¼€í†¤ì‚°ì¦ (DKA)</div>
                
                <div class="pdf-h2">1. Pathophysiology (ë³‘íƒœìƒë¦¬)</div>
                <p class="pdf-text">
                    DKAëŠ” ì¸ìŠë¦°ì˜ ì ˆëŒ€ì  ê²°í•(Absolute Deficiency)ê³¼ ê¸¸í•­ í˜¸ë¥´ëª¬(Glucagon, Cortisol, Catecholamines)ì˜ ê³¼ë‹¤ ë¶„ë¹„ë¡œ ì¸í•´ ë°œìƒí•œë‹¤. 
                    <br>ì£¼ìš” 3ëŒ€ ì§•í›„: <strong>1) ê³ í˜ˆë‹¹(Hyperglycemia), 2) ëŒ€ì‚¬ì„± ì‚°ì¦(Metabolic Acidosis), 3) ì¼€í†¤ì¦(Ketosis)</strong>.
                </p>
                
                <div class="highlight-box">
                    <strong>ğŸ’¡ Ketogenesis Mechanism</strong><br>
                    Insulin â†“ â†’ Lipolysis â†‘ â†’ Free Fatty Acid (FFA) â†‘ â†’ Liver Mitochondria â†’ Beta-oxidation â†’ 
                    <span style="color:#d32f2f;">Ketone bodies (Acetoacetate, Î²-hydroxybutyrate)</span> ìƒì„±
                </div>

                <div class="pdf-h2">2. Precipitating Factors (ìœ ë°œ ìš”ì¸)</div>
                <ul class="pdf-text" style="padding-left: 20px;">
                    <li><strong>Infection (m/c):</strong> Pneumonia, UTI (30-50%)</li>
                    <li>Inadequate Insulin therapy (í™˜ìì˜ ì„ì˜ ì¤‘ë‹¨)</li>
                    <li>New onset Type 1 DM</li>
                </ul>
                
                <div class="dropped-note" style="top: 400px; left: 60%;" onclick="focusChat('chat-13-2')">
                    ğŸ“Œ <strong>AI í•µì‹¬ ìš”ì•½</strong><br>
                    ê°ì—¼(Infection)ì´ ê°€ì¥ í”í•œ ì›ì¸ì…ë‹ˆë‹¤. ì½”í‹°ì†” ë“± ìŠ¤íŠ¸ë ˆìŠ¤ í˜¸ë¥´ëª¬ì´ ì¸ìŠë¦° ì €í•­ì„±ì„ ë†’ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
                </div>
            </div>
            
            <div class="pdf-page" id="p14" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="page-num">14</div>
                <div class="pdf-title">Chapter 4. DKA - Clinical Manifestation</div>
                
                <div class="pdf-h2">3. Signs & Symptoms (ì¦ìƒ ë° ì§•í›„)</div>
                <p class="pdf-text">
                    ì´ˆê¸°ì—ëŠ” ë‹¤ë‡¨(Polyuria), ë‹¤ìŒ(Polydipsia), ì²´ì¤‘ ê°ì†Œê°€ ë‚˜íƒ€ë‚˜ë©°, íƒˆìˆ˜(Dehydration)ê°€ ì§„í–‰ë˜ë©´ ì €í˜ˆì••, ë¹ˆë§¥ì´ ë°œìƒí•œë‹¤.
                    <br>ìœ„ì¥ê´€ ì¦ìƒìœ¼ë¡œ <strong>ì˜¤ì‹¬, êµ¬í† , ë³µí†µ(Abdominal pain)</strong>ì´ í”í•˜ì—¬ 'ê¸‰ì„± ë³µì¦(Acute Abdomen)'ê³¼ ê°ë³„ì´ í•„ìš”í•˜ë‹¤.
                </p>

                <div class="highlight-box" style="background-color: #fff3e0; border-color: #ffe0b2;">
                    <strong>â˜… Kussmaul Respiration (ì¿ ìŠ¤ë§ˆìš¸ í˜¸í¡)</strong><br>
                    ëŒ€ì‚¬ì„± ì‚°ì¦(Metabolic Acidosis)ì— ëŒ€í•œ í˜¸í¡ì„± ë³´ìƒ ê¸°ì „ìœ¼ë¡œ, ê¹Šê³  ë¹ ë¥¸ í˜¸í¡(Deep & Rapid breathing)ì´ íŠ¹ì§•ì ì´ë‹¤. 
                    í˜¸ê¸° ì‹œ ì©ì€ ì‚¬ê³¼ ëƒ„ìƒˆ(Fruity breath odor)ê°€ ë‚œë‹¤.
                </div>

                <div class="pdf-h2">4. Lab Findings (ê²€ì‚¬ ì†Œê²¬)</div>
                <p class="pdf-text">
                    - Glucose > 250 mg/dL<br>
                    - <span class="important">High Anion Gap Metabolic Acidosis (HAGMA)</span>: Anion Gap > 12 mEq/L<br>
                    - Serum Ketone (+) / Urine Ketone (+++)
                </p>
            </div>
            
            <div class="pdf-page" id="p15" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="page-num">15</div>
                <div class="pdf-title">Chapter 4. DKA - Management</div>
                
                <div class="pdf-h2">5. Treatment Protocol (ì¹˜ë£Œ ì›ì¹™)</div>
                <p class="pdf-text">
                    ì„±ê³µì ì¸ ì¹˜ë£Œë¥¼ ìœ„í•´ ë‹¤ìŒ ìˆœì„œë¥¼ ì¤€ìˆ˜í•´ì•¼ í•œë‹¤: 
                    <br><strong>Fluid â†’ Potassium($K^+$) â†’ Insulin</strong>
                </p>

                <div class="pdf-text">
                    <strong>1) Fluid Resuscitation (ìˆ˜ì•¡ ìš”ë²•)</strong><br>
                    - Initial: 0.9% Normal Saline 1L/hr (ì²« 1~2ì‹œê°„)<br>
                    - í˜ˆë‹¹ < 200mg/dL ë„ë‹¬ ì‹œ: 5% Dextrose í¬í•¨ ìˆ˜ì•¡ìœ¼ë¡œ ë³€ê²½ (ì €í˜ˆë‹¹ ë°©ì§€)
                </div>

                <div class="highlight-box" style="background-color: #ffebee; border-color: #ffcdd2;">
                    <strong>âš ï¸ WARNING: Potassium ($K^+$) Correction</strong><br>
                    ì¸ìŠë¦°ì€ ì„¸í¬ ë‚´ë¡œ $K^+$ë¥¼ ì´ë™ì‹œì¼œ <span class="important">ì‹¬í•œ ì €ì¹¼ë¥¨í˜ˆì¦(Hypokalemia)</span>ì„ ìœ ë°œí•  ìˆ˜ ìˆë‹¤.<br>
                    ë°˜ë“œì‹œ $K^+$ > 3.3 mEq/L ì„ì„ í™•ì¸ í›„ ì¸ìŠë¦°ì„ ì‹œì‘í•œë‹¤.
                </div>
            </div>
        </div>
    </div>

    <div class="right-panel">
        <div class="tabs">
            <div class="tab active" onclick="showTab('tab-chat')">AI ì±„íŒ…</div>
            <div class="tab" onclick="showTab('tab-jokbo')">ê´€ë ¨ ì¡±ë³´</div>
            <div class="tab" onclick="showTab('tab-script')">ë…¹ìŒ ìŠ¤í¬ë¦½íŠ¸</div>
        </div>

        <div class="tab-content-container">
            <div id="tab-chat" class="tab-content active">
                <div class="chat-container">
                    <div class="msg-date">Page 13 í•™ìŠµ ì¤‘ ì§ˆë¬¸</div>
                    <div class="bubble user-msg">DKAë‘ HHS ì°¨ì´ì ì´ í—·ê°ˆë ¤. í‘œë¡œ ì •ë¦¬í•´ì¤˜.</div>
                    <div class="bubble ai-msg" id="chat-13-1" draggable="true" ondragstart="drag(event)">
                        <strong>[DKA vs HHS ê°ë³„ í¬ì¸íŠ¸]</strong><br>
                        1. <strong>DKA (ì£¼ë¡œ 1í˜•)</strong>: ì‚°ì¦(pH<7.3), ì¼€í†¤(+), ë³µí†µ í”í•¨.<br>
                        2. <strong>HHS (ì£¼ë¡œ 2í˜•)</strong>: ì‹¬í•œ ê³ í˜ˆë‹¹(>600), ì‚°ì¦ ì—†ìŒ, ì˜ì‹ ì €í•˜ ëšœë ·.<br>
                        ê°€ì¥ í° ì°¨ì´ëŠ” <strong>'ì¼€í†¤ì‚°ì¦ ìœ ë¬´'</strong>ì…ë‹ˆë‹¤.
                    </div>
                    <div class="bubble user-msg">ìœ ë°œ ìš”ì¸ ì¤‘ì— m/cê°€ ë­ì•¼?</div>
                    <div class="bubble ai-msg" id="chat-13-2" draggable="true" ondragstart="drag(event)">
                        ê°€ì¥ í”í•œ ì›ì¸(most common)ì€ <strong>ê°ì—¼(Infection)</strong>ì…ë‹ˆë‹¤. íë ´ì´ë‚˜ ìš”ë¡œê°ì—¼ì´ ìˆì„ ë•Œ ìŠ¤íŠ¸ë ˆìŠ¤ í˜¸ë¥´ëª¬ì´ ë‚˜ì™€ ì¸ìŠë¦° ì‘ìš©ì„ ë°©í•´í•©ë‹ˆë‹¤.
                    </div>

                    <div class="msg-date">Page 14 í•™ìŠµ ì¤‘ ì§ˆë¬¸</div>
                    <div class="bubble user-msg">Anion Gap ê³„ì‚° ê³µì‹ì´ ë­ì˜€ì§€?</div>
                    <div class="bubble ai-msg" id="chat-14-1" draggable="true" ondragstart="drag(event)">
                        <strong>Anion Gap = $Na^+ - (Cl^- + HCO_3^-)$</strong><br>
                        ì •ìƒì¹˜ëŠ” 12Â±2 ì…ë‹ˆë‹¤. DKAì—ì„œëŠ” ì¼€í†¤ì‚°(ìŒì´ì˜¨)ì´ ì¦ê°€í•˜ì—¬ <strong>High Anion Gap</strong> ì‚°ì¦ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
                    </div>
                    <div class="bubble user-msg">ë³µí†µì€ ì™œ ìƒê¸°ëŠ” ê±°ì•¼?</div>
                    <div class="bubble ai-msg" id="chat-14-2" draggable="true" ondragstart="drag(event)">
                        ì •í™•í•œ ê¸°ì „ì€ ë¶ˆëª…í™•í•˜ë‚˜, <strong>ëŒ€ì‚¬ì„± ì‚°ì¦, íƒˆìˆ˜, ì „í•´ì§ˆ ë¶ˆê· í˜•</strong>ìœ¼ë¡œ ì¸í•œ ì¥ ìš´ë™ ì €í•˜(Ileus)ê°€ ì›ì¸ìœ¼ë¡œ ì¶”ì •ë©ë‹ˆë‹¤. ì¹˜ë£Œí•˜ë©´ í˜¸ì „ë©ë‹ˆë‹¤.
                    </div>

                    <div class="msg-date">Page 15 í•™ìŠµ ì¤‘ ì§ˆë¬¸</div>
                    <div class="bubble user-msg">ì¹˜ë£Œí•  ë•Œ ì¸ìŠë¦° ë¨¼ì € ì£¼ë©´ ì•ˆ ë¼?</div>
                    <div class="bubble ai-msg" id="chat-15-1" draggable="true" ondragstart="drag(event)">
                        <strong>ì ˆëŒ€ ì•ˆ ë©ë‹ˆë‹¤!</strong><br>
                        í™˜ìëŠ” ì‹¬í•œ íƒˆìˆ˜ ìƒíƒœì´ë¯€ë¡œ <strong>ìˆ˜ì•¡(NS) ê³µê¸‰ì´ 0ìˆœìœ„</strong>ì…ë‹ˆë‹¤. ë˜í•œ ì¸ìŠë¦°ì´ ì¹¼ë¥¨ì„ ì„¸í¬ ì•ˆìœ¼ë¡œ ë°€ì–´ë„£ì–´ <strong>ì¹˜ëª…ì ì¸ ë¶€ì •ë§¥</strong>ì´ ì˜¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ $K^+$ ìˆ˜ì¹˜ í™•ì¸ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.
                    </div>
                </div>
            </div>

            <div id="tab-jokbo" class="tab-content">
                <div style="color:#666; font-size:13px; margin-bottom:15px; font-weight:bold;">í˜„ì¬ í˜ì´ì§€ ê´€ë ¨ ê¸°ì¶œ (ìµœê·¼ 3ë…„)</div>
                
                <div class="jokbo-card p13-item visible">
                    <span class="badge kmle">23ë…„ KMLE</span> <span class="badge">ë‚´ë¶„ë¹„</span>
                    <div class="q-text">Q. ì œ1í˜• ë‹¹ë‡¨ë³‘ í™˜ìê°€ ê°ê¸° ì¦ìƒ í›„ ì˜ì‹ ì €í•˜ë¡œ ë‚´ì›í–ˆë‹¤. ì†Œë³€ ì¼€í†¤(3+)ì´ì—ˆë‹¤. ì´ í™˜ìì˜ ë³‘íƒœìƒë¦¬ì— ëŒ€í•œ ì„¤ëª…ìœ¼ë¡œ ì˜³ì€ ê²ƒì€?</div>
                    <div class="options">
                        â‘  ì¸ìŠë¦° ë¶„ë¹„ ì¦ê°€<br>
                        â‘¡ ìœ ë¦¬ì§€ë°©ì‚°(FFA)ì˜ ì‚°í™” ê°ì†Œ<br>
                        â‘¢ <strong>Glucagon ë“± ê¸¸í•­ í˜¸ë¥´ëª¬ ì¦ê°€</strong>
                    </div>
                </div>

                <div class="jokbo-card p14-item">
                    <span class="badge kmle">22ë…„ ì„ì¢…í‰</span> <span class="badge">ì¦ìƒ</span>
                    <div class="q-text">Q. 24ì„¸ ë‚¨ìê°€ ë³µí†µê³¼ êµ¬í† ë¥¼ ì£¼ì†Œë¡œ ë‚´ì›í–ˆë‹¤. í˜¸í¡ ìˆ˜ëŠ” 32íšŒ/ë¶„ìœ¼ë¡œ ê¹Šê³  ë¹¨ëìœ¼ë©°, í˜¸ê¸° ì‹œ ê³¼ì¼ ëƒ„ìƒˆê°€ ë‚¬ë‹¤. ì§„ë‹¨ì€?</div>
                    <div class="options">
                        â‘  ê¸‰ì„± ì·Œì¥ì—¼ &nbsp; â‘¡ <strong>ë‹¹ë‡¨ë³‘ì„± ì¼€í†¤ì‚°ì¦</strong> &nbsp; â‘¢ ìœ„ê¶¤ì–‘ ì²œê³µ
                    </div>
                </div>

                <div class="jokbo-card p15-item">
                    <span class="badge kmle">24ë…„ ì¤‘ê°„</span> <span class="badge important">â˜…í•„ìˆ˜</span>
                    <div class="q-text">Q. DKA í™˜ìì˜ ì´ˆê¸° í˜ˆì•¡ ê²€ì‚¬ ê²°ê³¼ $K^+$ 2.8 mEq/L ì˜€ë‹¤. ê°€ì¥ ìš°ì„ ì ìœ¼ë¡œ ì‹œí–‰í•´ì•¼ í•  ì²˜ì¹˜ëŠ”?</div>
                    <div class="options">
                        â‘  Regular Insulin IV bolus<br>
                        â‘¡ <strong>KCl í¬í•¨ ìˆ˜ì•¡ íˆ¬ì—¬ ë° ì¸ìŠë¦° ë³´ë¥˜</strong><br>
                        â‘¢ Bicarbonate íˆ¬ì—¬
                    </div>
                </div>
            </div>

            <div id="tab-script" class="tab-content">
                <div class="script-segment" id="script-13-1">
                    <div class="script-header"><span class="speaker">ê¹€OO êµìˆ˜ë‹˜</span><span class="timestamp">09:32</span></div>
                    <div class="script-text">
                        ì, <span class="keyword">DKAëŠ” ì‘ê¸‰ì…ë‹ˆë‹¤.</span> ì •ì˜ë¶€í„° í™•ì‹¤íˆ í•©ì‹œë‹¤. ì¸ìŠë¦°ì´ 'ì ˆëŒ€ì 'ìœ¼ë¡œ ë¶€ì¡±í•œ ê±°ì˜ˆìš”. 
                        ê·¸ëŸ¬ë©´ ìš°ë¦¬ ëª¸ì€ êµ¶ê³  ìˆë‹¤ê³  ì°©ê°í•´ì„œ ì§€ë°©ì„ íƒœì›ë‹ˆë‹¤. ì´ë•Œ ë¶€ì‚°ë¬¼ë¡œ <strong>'ì¼€í†¤ì²´'</strong>ê°€ ë‚˜ì™€ì„œ í”¼ê°€ ì‚°ì„±ì´ ë˜ëŠ” ê±°ì£ .
                    </div>
                </div>

                <div class="script-segment" id="script-14-1">
                    <div class="script-header"><span class="speaker">ê¹€OO êµìˆ˜ë‹˜</span><span class="timestamp">09:48</span></div>
                    <div class="script-text">
                        í™˜ìê°€ ì‘ê¸‰ì‹¤ì— ë“¤ì–´ì˜¤ëŠ”ë° <strong>ìˆ¨ì„ í—ë–¡ê±°ë¦°ë‹¤(Kussmaul)</strong>, ê·¸ë¦¬ê³  ì…ì—ì„œ ìˆ  ëƒ„ìƒˆ ê°™ì€ <strong>ê³¼ì¼ í–¥</strong>ì´ ë‚œë‹¤? 
                        ê·¸ëŸ¼ ë°”ë¡œ í˜ˆë‹¹ë¶€í„° ì°”ëŸ¬ë´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë°° ì•„í”„ë‹¤ê³  ë§¹ì¥ì—¼ìœ¼ë¡œ ì˜¤ì§„í•˜ë©´ ì•ˆ ë¼ìš”. DKAë„ ë³µí†µ ì‹¬í•©ë‹ˆë‹¤.
                    </div>
                </div>

                <div class="script-segment" id="script-15-1">
                    <div class="script-header"><span class="speaker">ê¹€OO êµìˆ˜ë‹˜</span><span class="timestamp">10:15</span></div>
                    <div class="script-text">
                        <span class="keyword">ì´ê±° êµ­ì‹œ ë‹¨ê³¨ ë¬¸ì œì…ë‹ˆë‹¤. ë³„í‘œ ì¹˜ì„¸ìš”.</span> ì¹˜ë£Œ ìˆœì„œ! ì¸ìŠë¦°ë¶€í„° ì£¼ë©´ í™˜ì ì£½ìŠµë‹ˆë‹¤. 
                        íƒˆìˆ˜ êµì •ì´ ë¨¼ì €ë‹ˆê¹Œ <strong>ìˆ˜ì•¡(Normal Saline)</strong> ì½¸ì½¸ ë¶€ì–´ì£¼ê³ , 
                        ê¼­ <strong>ì¹¼ë¥¨(K) ìˆ˜ì¹˜ í™•ì¸</strong>í•˜ê³  ì¸ìŠë¦° ì£¼ì„¸ìš”. ì•ˆ ê·¸ëŸ¬ë©´ ë¶€ì •ë§¥ ì˜µë‹ˆë‹¤.
                    </div>
                </div>
                 <div style="height: 200px;"></div>
            </div>
        </div>

        <div class="audio-player-bar" id="audioPlayer">
            <div class="play-btn">â–¶</div>
            <div class="timeline-container">
                <div class="timeline-bar"><div class="timeline-progress" id="audioProgress"></div></div>
                <div class="time-info"><span id="currentTime">00:00</span><span>50:00</span></div>
            </div>
            <div class="speed-control">1.5x</div>
        </div>
    </div>
</div>

<script>
    // [ì „ì—­ ë³€ìˆ˜]
    const pages = ['p13', 'p14', 'p15'];
    let currentPageIdx = 0;

    // [ê¸°ëŠ¥ 1: í˜ì´ì§€ ë³€ê²½]
    function changePage(direction) {
        const nextIdx = currentPageIdx + direction;
        if (nextIdx < 0 || nextIdx >= pages.length) return;

        // í˜„ì¬ í˜ì´ì§€ ìˆ¨ê¹€
        document.getElementById(pages[currentPageIdx]).classList.remove('active');
        
        // ìƒˆ í˜ì´ì§€ ì—…ë°ì´íŠ¸
        currentPageIdx = nextIdx;
        const newPageId = pages[currentPageIdx];
        document.getElementById(newPageId).classList.add('active');
        
        // UI ì—…ë°ì´íŠ¸
        const pageNum = newPageId.replace('p', '');
        document.getElementById('headerPageNum').innerText = `Page ${pageNum} / 60`;
        
        document.querySelector('.nav-prev').classList.toggle('disabled', currentPageIdx === 0);
        document.querySelector('.nav-next').classList.toggle('disabled', currentPageIdx === pages.length - 1);

        // ì‹±í¬ ì‹¤í–‰
        syncRightPanel(pageNum);
    }

    // [ê¸°ëŠ¥ 2: ì»¨í…ì¸  ë™ê¸°í™”]
    function syncRightPanel(pageNum) {
        // ì¡±ë³´ í•„í„°ë§
        document.querySelectorAll('.jokbo-card').forEach(card => card.classList.remove('visible'));
        document.querySelectorAll(`.p${pageNum}-item`).forEach(card => card.classList.add('visible'));

        // ì‹±í¬ ë°ì´í„° ë§µí•‘
        const syncMap = {
            '13': { chat: 'chat-13-1', script: 'script-13-1', time: '09:32', progress: '18%' },
            '14': { chat: 'chat-14-1', script: 'script-14-1', time: '09:48', progress: '35%' },
            '15': { chat: 'chat-15-1', script: 'script-15-1', time: '10:15', progress: '60%' }
        };

        const target = syncMap[pageNum];
        if (target) {
            const activeTabId = document.querySelector('.tab-content.active').id;
            
            // í•´ë‹¹ íƒ­ì˜ íƒ€ê²Ÿ ìš”ì†Œ ID ì°¾ê¸°
            let targetElId = null;
            if (activeTabId === 'tab-chat') targetElId = target.chat;
            else if (activeTabId === 'tab-script') targetElId = target.script;
            
            if (targetElId) {
                const targetEl = document.getElementById(targetElId);
                if (targetEl) {
                    // ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ ì´ë™
                    const container = document.querySelector('.tab-content-container');
                    container.scrollTo({ top: targetEl.offsetTop - 80, behavior: 'smooth' });
                    highlightEffect(targetEl);
                }
            }
            // í”Œë ˆì´ì–´ UI ì—…ë°ì´íŠ¸
            document.getElementById('currentTime').innerText = target.time;
            document.getElementById('audioProgress').style.width = target.progress;
        }
    }

    // í•˜ì´ë¼ì´íŠ¸ íš¨ê³¼
    function highlightEffect(element) {
        document.querySelectorAll('.active-context-bg').forEach(el => el.classList.remove('active-context-bg'));
        element.classList.add('active-context-bg');
        setTimeout(() => { element.classList.remove('active-context-bg'); }, 2000);
    }

    // [ê¸°ëŠ¥ 3: íƒ­ ì „í™˜]
    function showTab(tabId) {
        // íƒ­ ì»¨í…ì¸  ì „í™˜
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        
        // íƒ­ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì „í™˜
        document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
        const tabs = ['tab-chat', 'tab-jokbo', 'tab-script'];
        document.querySelectorAll('.tab')[tabs.indexOf(tabId)].classList.add('active');

        // í”Œë ˆì´ì–´ í‘œì‹œ ì—¬ë¶€
        const player = document.getElementById('audioPlayer');
        if (tabId === 'tab-script') player.classList.add('visible');
        else player.classList.remove('visible');
        
        // í˜„ì¬ í˜ì´ì§€ ê¸°ì¤€ìœ¼ë¡œ ì¬ì‹±í¬
        const currentPageNum = pages[currentPageIdx].replace('p', '');
        syncRightPanel(currentPageNum);
    }

    // [ê¸°ëŠ¥ 4: Drag & Drop]
    function drag(ev) { ev.dataTransfer.setData("chatId", ev.target.id); ev.dataTransfer.setData("text", ev.target.innerText); }
    function allowDrop(ev) { ev.preventDefault(); }
    function drop(ev) {
        ev.preventDefault();
        const chatId = ev.dataTransfer.getData("chatId"); 
        // HTML íƒœê·¸ ì œê±°í•˜ê³  í…ìŠ¤íŠ¸ë§Œ ì¶”ì¶œ
        const tempDiv = document.createElement("div");
        tempDiv.innerHTML = ev.dataTransfer.getData("text");
        const cleanText = tempDiv.textContent || tempDiv.innerText || "";
        
        const rect = ev.currentTarget.getBoundingClientRect();
        
        const note = document.createElement("div");
        note.className = "dropped-note"; 
        note.innerHTML = `ğŸ“Œ <strong>AI ë©”ëª¨</strong><br>${cleanText.substring(0, 35)}...`;
        note.style.left = (ev.clientX - rect.left) + "px"; 
        note.style.top = (ev.clientY - rect.top) + "px";
        note.onclick = () => focusChat(chatId);
        
        ev.currentTarget.appendChild(note);
    }

    function focusChat(elementId) {
        showTab('tab-chat');
        const el = document.getElementById(elementId);
        if(el) {
            document.querySelector('.tab-content-container').scrollTo({ top: el.offsetTop - 80, behavior: 'smooth' });
            highlightEffect(el);
        }
    }
</script>
</body>
</html>
