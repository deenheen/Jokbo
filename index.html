<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Study Aid (Demo)</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* --- 1. ê¸°ë³¸ ì„¤ì • (Reset & Variables) --- */
        :root {
            --primary: #4F46E5;       /* ë©”ì¸ ì»¬ëŸ¬ (ì¸ë””ê³ ) */
            --bg-gray: #f3f4f6;       /* ë°°ê²½ìƒ‰ */
            --paper: #ffffff;         /* ë¬¸ì„œ ë°°ê²½ìƒ‰ */
            --text-main: #1f2937;     /* ê¸°ë³¸ í…ìŠ¤íŠ¸ */
            --text-sub: #6b7280;      /* ë³´ì¡° í…ìŠ¤íŠ¸ */
            --highlight: #fef08a;     /* í˜•ê´‘íœ ìƒ‰ìƒ (ë…¸ë‘) */
            --highlight-border: #eab308;
            --border: #e5e7eb;
            --sidebar-width: 400px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-gray);
            height: 100vh;
            display: flex;
            overflow: hidden; /* ì „ì²´ í™”ë©´ ìŠ¤í¬ë¡¤ ë°©ì§€ */
        }

        /* --- 2. ë ˆì´ì•„ì›ƒ (Layout) --- */
        /* ì™¼ìª½: ê°•ì˜ë¡ ë·°ì–´ */
        .viewer-area {
            flex: 1; /* ë‚¨ì€ ê³µê°„ ë‹¤ ì°¨ì§€ */
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
            overflow-y: auto; /* ë‚´ë¶€ ìŠ¤í¬ë¡¤ */
        }

        /* ë¬¸ì„œ ì¢…ì´ ìŠ¤íƒ€ì¼ */
        .paper-doc {
            width: 100%;
            max-width: 800px;
            background: var(--paper);
            padding: 60px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            margin-bottom: 20px;
            color: var(--text-main);
            line-height: 1.8;
        }

        .paper-doc h1 { font-size: 2rem; margin-bottom: 20px; color: var(--primary); border-bottom: 2px solid var(--border); padding-bottom: 15px; }
        .paper-doc p { margin-bottom: 20px; font-size: 1.05rem; }

        /* í•˜ì´ë¼ì´íŠ¸ íš¨ê³¼ */
        .highlight {
            background: transparent;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .highlight.active {
            background-color: var(--highlight);
            border-bottom: 2px solid var(--highlight-border);
            font-weight: 600;
        }

        /* íˆ´íŒ (ë§ˆìš°ìŠ¤ ì˜¬ë ¸ì„ ë•Œ ë¬¸ì œ ë³´ì—¬ì£¼ê¸°) */
        .highlight:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            width: 250px;
            z-index: 100;
            pointer-events: none;
            margin-bottom: 5px;
        }

        /* ì˜¤ë¥¸ìª½: ì‚¬ì´ë“œë°” */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--paper);
            border-left: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            box-shadow: -4px 0 15px rgba(0,0,0,0.05);
        }

        /* --- 3. ì‚¬ì´ë“œë°” ì»´í¬ë„ŒíŠ¸ --- */
        /* íƒ­ ë©”ë‰´ */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
        }
        
        .tab-btn {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            font-weight: 600;
            color: var(--text-sub);
            cursor: pointer;
            transition: 0.2s;
        }
        
        .tab-btn:hover { background: #f9fafb; }
        .tab-btn.active { 
            color: var(--primary); 
            border-bottom: 3px solid var(--primary); 
        }

        /* íƒ­ ì½˜í…ì¸  ì˜ì—­ */
        .tab-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ */
        }
        .tab-content.show { display: block; }
        
        /* Flex ëª¨ë“œê°€ í•„ìš”í•œ íƒ­ (ì±„íŒ…) */
        .tab-content.flex-col {
            display: none;
            flex-direction: column;
        }
        .tab-content.flex-col.show { display: flex; }

        /* ì¡±ë³´ ì—…ë¡œë“œ ë²„íŠ¼ */
        .upload-box {
            border: 2px dashed var(--border);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: 0.2s;
        }
        .upload-box:hover { border-color: var(--primary); background: #f0fdf4; }
        
        /* ì¡±ë³´ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ */
        .match-item {
            background: #fff;
            border: 1px solid var(--border);
            border-left: 4px solid #22c55e; /* ì´ˆë¡ìƒ‰ */
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: 0.2s;
        }
        .match-item:hover { transform: translateX(-2px); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .tag { font-size: 11px; background: #eee; padding: 2px 6px; border-radius: 4px; color: #555; margin-bottom: 5px; display: inline-block; }

        /* ì±„íŒ… UI */
        .chat-area { flex: 1; overflow-y: auto; padding-right: 5px; margin-bottom: 10px; }
        .msg { margin-bottom: 15px; font-size: 14px; line-height: 1.5; max-width: 90%; }
        .msg.ai { background: #eff6ff; padding: 12px; border-radius: 12px 12px 12px 0; color: #1e3a8a; }
        .msg.user { background: var(--primary); color: white; padding: 10px 12px; border-radius: 12px 12px 0 12px; margin-left: auto; width: fit-content;}
        
        .chat-input-box { display: flex; gap: 10px; border-top: 1px solid var(--border); padding-top: 15px; }
        .chat-input { flex: 1; padding: 10px; border: 1px solid var(--border); border-radius: 20px; outline: none; }
        .send-btn { width: 40px; height: 40px; border-radius: 50%; background: var(--primary); color: white; border: none; cursor: pointer; }

        /* ì €ì¥ ë²„íŠ¼ (ì±„íŒ… ë‚´) */
        .save-btn { font-size: 11px; border: 1px solid #ddd; background: white; cursor: pointer; padding: 2px 8px; border-radius: 10px; margin-top: 5px; }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        .flash { animation: flash-anim 1.5s ease; }
        @keyframes flash-anim {
            0% { background-color: rgba(255, 215, 0, 0.5); }
            100% { background-color: transparent; }
        }

    </style>
</head>
<body>

    <main class="viewer-area">
        <div class="paper-doc">
            <h1>ë§ˆì¼€íŒ… ì›ë¡  3ì£¼ì°¨: ì†Œë¹„ì í–‰ë™</h1>
            <p style="color:#666; font-size: 14px;">êµìˆ˜: ê¹€ë©”íƒ€ | ê°•ì˜ì‹¤: 304í˜¸</p>
            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

            <p>
                ì†Œë¹„ì í–‰ë™ ì—°êµ¬ëŠ” ë§ˆì¼€íŒ…ì˜ ì‹œì‘ì´ì ëì…ë‹ˆë‹¤. ì†Œë¹„ìê°€ ì œí’ˆì„ êµ¬ë§¤í•˜ê¸°ê¹Œì§€ì˜ ê³¼ì •ì„ ì´í•´í•´ì•¼ í•©ë‹ˆë‹¤.
                ê°€ì¥ ë¨¼ì € ì¼ì–´ë‚˜ëŠ” ë‹¨ê³„ëŠ” 
                <span class="highlight" id="high-1" data-tooltip="[2023 ì¤‘ê°„] ë¬¸ì œ ì¸ì‹ ë‹¨ê³„ì˜ ë‚´ì /ì™¸ì  ìš”ì¸ì„ ì„œìˆ í•˜ì‹œì˜¤.">ë¬¸ì œ ì¸ì‹(Problem Recognition)</span>ì…ë‹ˆë‹¤.
                í˜„ì¬ ìƒíƒœì™€ ë°”ë¼ëŠ” ìƒíƒœì˜ ê´´ë¦¬ë¥¼ ëŠë¼ëŠ” ìˆœê°„ì…ë‹ˆë‹¤.
            </p>

            <p>
                ê·¸ ë‹¤ìŒì€ ì •ë³´ íƒìƒ‰ì…ë‹ˆë‹¤. ê¸°ì–µì„ ë”ë“¬ëŠ” ë‚´ì  íƒìƒ‰ê³¼ ì™¸ë¶€ì—ì„œ ì •ë³´ë¥¼ ì°¾ëŠ” ì™¸ì  íƒìƒ‰ì´ ìˆìŠµë‹ˆë‹¤.
                íŠ¹íˆ <span class="highlight" id="high-2" data-tooltip="[2022 ê¸°ë§] ê³ ê´€ì—¬ ì œí’ˆì¼ìˆ˜ë¡ ì™¸ì  íƒìƒ‰ ë¹„ì¤‘ì´ ëŠ˜ì–´ë‚˜ëŠ” ì´ìœ ëŠ”?">ê´€ì—¬ë„(Involvement)ê°€ ë†’ì€ ì œí’ˆ</span>ì¼ìˆ˜ë¡ 
                ì†Œë¹„ìëŠ” ë” ë§ì€ ì‹œê°„ì„ ë“¤ì—¬ ì™¸ì  íƒìƒ‰ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
            </p>

            <p>
                ì´í›„ ëŒ€ì•ˆ í‰ê°€, êµ¬ë§¤, ê·¸ë¦¬ê³  
                <span class="highlight" id="high-3" data-tooltip="[2024 ìª½ì§€ì‹œí—˜] ì¸ì§€ë¶€ì¡°í™”ì˜ ì •ì˜ì™€ í•´ê²° ë°©ì•ˆì€?">êµ¬ë§¤ í›„ í–‰ë™</span>ìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤.
                êµ¬ë§¤ í›„ í–‰ë™ ë‹¨ê³„ì—ì„œ ë°œìƒí•˜ëŠ” 'ì¸ì§€ ë¶€ì¡°í™”'ë¥¼ ì¤„ì—¬ì£¼ëŠ” ê²ƒì´ ì¬êµ¬ë§¤ë¥¼ ìœ ë„í•˜ëŠ” í•µì‹¬ ì „ëµì…ë‹ˆë‹¤.
            </p>
        </div>
    </main>

    <aside class="sidebar">
        <nav class="tabs">
            <button class="tab-btn active" onclick="switchTab('jokbo', this)">
                <i class="fas fa-file-alt"></i> ì¡±ë³´ ë§¤ì¹­
            </button>
            <button class="tab-btn" onclick="switchTab('ai', this)">
                <i class="fas fa-robot"></i> AI íŠœí„°
            </button>
            <button class="tab-btn" onclick="switchTab('saved', this)">
                <i class="fas fa-bookmark"></i> ì €ì¥ë¨
            </button>
        </nav>

        <div id="tab-jokbo" class="tab-content show">
            <div class="upload-box" onclick="runAnalysis()">
                <i class="fas fa-cloud-upload-alt fa-2x" style="color:#ccc; margin-bottom:10px;"></i><br>
                <b>ì¡±ë³´ íŒŒì¼ ì—…ë¡œë“œ (Click)</b><br>
                <span style="font-size:12px; color:#888;">PDFë‚˜ ì´ë¯¸ì§€ë¥¼ ì˜¬ë¦¬ë©´ ë¶„ì„í•©ë‹ˆë‹¤.</span>
            </div>
            
            <div id="analysis-result" style="display: none;">
                <h4 style="margin-bottom:15px; color:var(--text-main);">
                    <i class="fas fa-check-circle" style="color:#22c55e;"></i> ë¶„ì„ ê²°ê³¼: 3ê±´ ë§¤ì¹­
                </h4>

                <div class="match-item" onclick="jumpTo('high-1')">
                    <span class="tag">2023 ì¤‘ê°„ê³ ì‚¬</span>
                    <div style="font-weight:bold; font-size:14px;">ë¬¸ì œ ì¸ì‹ ë‹¨ê³„ ì„œìˆ í˜•</div>
                    <div style="font-size:12px; color:#666; margin-top:5px;">ê°•ì˜ë¡ 1ë²ˆì§¸ ë¬¸ë‹¨ ê´€ë ¨</div>
                </div>

                <div class="match-item" onclick="jumpTo('high-2')">
                    <span class="tag">2022 ê¸°ë§ê³ ì‚¬</span>
                    <div style="font-weight:bold; font-size:14px;">ê´€ì—¬ë„ì™€ ì •ë³´ íƒìƒ‰</div>
                    <div style="font-size:12px; color:#666; margin-top:5px;">ê°•ì˜ë¡ 2ë²ˆì§¸ ë¬¸ë‹¨ ê´€ë ¨</div>
                </div>
            </div>
        </div>

        <div id="tab-ai" class="tab-content flex-col">
            <div class="chat-area" id="chat-box">
                <div class="msg ai">
                    ì•ˆë…•í•˜ì„¸ìš”! ğŸ‘‹ <br>
                    ë§ˆì¼€íŒ… ì›ë¡  3ì£¼ì°¨ ê°•ì˜ë¡ê³¼ ì¡±ë³´ë¥¼ ëª¨ë‘ í•™ìŠµí–ˆìŠµë‹ˆë‹¤. ê¶ê¸ˆí•œ ë‚´ìš©ì„ ë¬¼ì–´ë³´ì„¸ìš”.
                </div>
            </div>
            <div class="chat-input-box">
                <input type="text" id="user-input" class="chat-input" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..." onkeypress="if(event.key==='Enter') sendMsg()">
                <button class="send-btn" onclick="sendMsg()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>

        <div id="tab-saved" class="tab-content">
            <div id="saved-list">
                <div style="text-align:center; color:#999; margin-top:50px;">
                    <i class="far fa-folder-open fa-2x"></i><br><br>
                    ì €ì¥ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.<br>
                    ì±„íŒ…ì°½ì´ë‚˜ ì¡±ë³´ì—ì„œ 'ì €ì¥'ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.
                </div>
            </div>
        </div>
    </aside>

    <script>
        // --- ê¸°ëŠ¥ ë¡œì§ ---

        // 1. íƒ­ ì „í™˜
        function switchTab(tabId, btnElement) {
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            btnElement.classList.add('active');

            // ì½˜í…ì¸  ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('show');
                if (content.id === 'tab-ai') content.style.display = 'none'; // flex-col ì²˜ë¦¬ìš©
            });

            // ì„ íƒëœ íƒ­ ë³´ì´ê¸°
            const target = document.getElementById('tab-' + tabId);
            if (tabId === 'ai') {
                target.style.display = 'flex'; // ì±„íŒ… íƒ­ì€ flex í•„ìš”
            } else {
                target.classList.add('show');
            }
        }

        // 2. ì¡±ë³´ ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜
        function runAnalysis() {
            const uploadBox = document.querySelector('.upload-box');
            uploadBox.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ë¶„ì„ ì¤‘...';
            
            setTimeout(() => {
                uploadBox.style.display = 'none'; // ì—…ë¡œë“œ ë°•ìŠ¤ ìˆ¨ê¹€
                document.getElementById('analysis-result').style.display = 'block'; // ê²°ê³¼ í‘œì‹œ
                
                // ê°•ì˜ë¡ì— í˜•ê´‘íœ ì¹ í•˜ê¸°
                document.querySelectorAll('.highlight').forEach(el => el.classList.add('active'));
                
                // íƒ­ì„ AIë¡œ ìë™ ì „í™˜í•´ì„œ ì•Œë ¤ì¤Œ (ì„ íƒì‚¬í•­)
                // switchTab('ai', document.querySelectorAll('.tab-btn')[1]);
                addAiMsg("ì¡±ë³´ ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ê°•ì˜ë¡ì— ë…¸ë€ìƒ‰ìœ¼ë¡œ ì¤‘ìš” í‘œì‹œë¥¼ í•´ë‘ì—ˆìŠµë‹ˆë‹¤.");
            }, 1000);
        }

        // 3. í•´ë‹¹ ìœ„ì¹˜ë¡œ ì´ë™ (Deep Linking)
        function jumpTo(id) {
            const element = document.getElementById(id);
            element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // ê¹œë¹¡ì„ íš¨ê³¼
            element.parentElement.classList.add('flash');
            setTimeout(() => element.parentElement.classList.remove('flash'), 1500);
        }

        // 4. ì±„íŒ… ê¸°ëŠ¥
        function sendMsg() {
            const input = document.getElementById('user-input');
            const text = input.value.trim();
            if (!text) return;

            // ë‚´ ë©”ì‹œì§€ ì¶”ê°€
            const chatBox = document.getElementById('chat-box');
            chatBox.innerHTML += `<div class="msg user">${text}</div>`;
            input.value = '';
            chatBox.scrollTop = chatBox.scrollHeight;

            // AI ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜
            setTimeout(() => {
                let reply = "ì£„ì†¡í•´ìš”, ê°•ì˜ë¡ì—ì„œ ì°¾ì„ ìˆ˜ ì—†ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤.";
                if (text.includes("ì¡±ë³´") || text.includes("ìš”ì•½")) {
                    reply = "ì´ë²ˆ ì£¼ì°¨ ì¡±ë³´ í•µì‹¬ì€ <b>'ì¸ì§€ ë¶€ì¡°í™”'</b>ì™€ <b>'ê´€ì—¬ë„'</b>ì…ë‹ˆë‹¤. íŠ¹íˆ ê¸°ë§ê³ ì‚¬ ê¸°ì¶œ(2ë²ˆ)ì„ ê¼­ í™•ì¸í•˜ì„¸ìš”!";
                } else if (text.includes("ì¸ì§€")) {
                    reply = "ì¸ì§€ ë¶€ì¡°í™”ë€ êµ¬ë§¤ í›„ ìì‹ ì˜ ì„ íƒì— ëŒ€í•´ ë¶ˆì•ˆê°ì„ ëŠë¼ëŠ” ì‹¬ë¦¬ì…ë‹ˆë‹¤. ë§ˆì¼€í„°ëŠ” ì´ë¥¼ í•´ì†Œì‹œì¼œì¤˜ì•¼ í•©ë‹ˆë‹¤.";
                }

                addAiMsg(reply, true);
            }, 600);
        }

        function addAiMsg(text, showSaveBtn = false) {
            const chatBox = document.getElementById('chat-box');
            let btnHtml = '';
            if (showSaveBtn) {
                // ì €ì¥ ë²„íŠ¼ ê¸°ëŠ¥ ì—°ê²°
                // ë¬¸ìì—´ ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬ë¥¼ ê°„ë‹¨íˆ í•˜ê¸° ìœ„í•´ textë¥¼ ê·¸ëŒ€ë¡œ ë„˜ê¹€
                btnHtml = `<br><button class="save-btn" onclick="saveNote('${text.replace(/<[^>]*>?/gm, '').substring(0, 15)}...')">ğŸ“Œ ë…¸íŠ¸ì— ì €ì¥</button>`;
            }
            
            chatBox.innerHTML += `<div class="msg ai">${text} ${btnHtml}</div>`;
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        // 5. ì €ì¥ ê¸°ëŠ¥
        function saveNote(noteText) {
            const list = document.getElementById('saved-list');
            
            // "ì €ì¥ëœ ë‚´ìš© ì—†ìŒ" ë©”ì‹œì§€ ì œê±°
            if (list.innerText.includes('ì €ì¥ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤')) {
                list.innerHTML = '';
            }

            const item = document.createElement('div');
            item.className = 'match-item'; // ê¸°ì¡´ ìŠ¤íƒ€ì¼ ì¬í™œìš©
            item.innerHTML = `
                <div style="font-weight:bold; font-size:14px;">${noteText}</div>
                <div style="font-size:11px; color:#888; margin-top:5px;">AI ì±„íŒ…ì—ì„œ ì €ì¥ë¨</div>
            `;
            list.prepend(item);
            
            alert('ë…¸íŠ¸ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
    </script>
</body>
</html>
            margin-bottom: 20px;
            color: #555;
        }

        /* ì¡±ë³´ í•˜ì´ë¼ì´íŠ¸ ìŠ¤íƒ€ì¼ */
        .jokbo-highlight {
            background-color: transparent; /* ì´ˆê¸°ì—” íˆ¬ëª… */
            padding: 2px 0;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .jokbo-highlight.active {
            background-color: var(--highlight-jokbo);
            border-bottom-color: var(--accent-jokbo);
            font-weight: 600;
        }
        
        /* í•˜ì´ë¼ì´íŠ¸ í˜¸ë²„ íš¨ê³¼ */
        .jokbo-highlight:hover::after {
            content: attr(data-tip); /* data-tip ì†ì„± ê°’ í‘œì‹œ */
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--secondary-color);
            color: #fff;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 0.9rem;
            white-space: nowrap;
            pointer-events: none; /* íˆ´íŒì´ ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ ë°©í•´ ì•ˆ í•˜ë„ë¡ */
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 10;
        }
        
        .jokbo-highlight:hover::after {
            opacity: 1;
        }


        /* ì˜¤ë¥¸ìª½: ì‚¬ì´ë“œë°” ì˜ì—­ */
        .sidebar {
            width: 400px; /* ê³ ì • ë„ˆë¹„ */
            background-color: var(--sidebar-bg);
            display: flex;
            flex-direction: column;
            border-left: 1px solid var(--border-color);
        }

        /* ì‚¬ì´ë“œë°” ìƒë‹¨ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            background-color: #f1f3f5;
        }

        .tab-button {
            flex: 1; /* ê· ë“± ë¶„í•  */
            padding: 15px;
            border: none;
            background: none;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-light);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px; /* ì•„ì´ì½˜ê³¼ í…ìŠ¤íŠ¸ ê°„ê²© */
        }

        .tab-button:hover {
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--text-color);
        }

        .tab-button.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            background-color: var(--sidebar-bg);
        }

        /* ì‚¬ì´ë“œë°” ì½˜í…ì¸  ì˜ì—­ */
        .sidebar-content {
            flex: 1; /* ë‚¨ì€ ê³µê°„ ì°¨ì§€ */
            overflow-y: auto; /* ì„¸ë¡œ ìŠ¤í¬ë¡¤ */
            padding: 20px;
            display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
        }

        .sidebar-content.active {
            display: flex; /* í™œì„±í™”ëœ íƒ­ë§Œ í‘œì‹œ */
            flex-direction: column;
        }

        /* --- íƒ­ë³„ ì½˜í…ì¸  ìŠ¤íƒ€ì¼ --- */

        /* 1. ì¡±ë³´ ë§¤ì¹­ íƒ­ */
        .upload-section {
            text-align: center;
            padding: 30px;
            border: 2px dashed var(--border-color);
            border-radius: 10px;
            margin-bottom: 25px;
            background-color: #f8f9fa;
            transition: border-color 0.3s;
        }
        
        .upload-section:hover {
            border-color: var(--primary-color);
        }

        .upload-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: background-color 0.2s;
        }

        .upload-btn:hover {
            background-color: #2980b9;
        }

        .match-list {
            list-style: none;
        }

        .match-item {
            background-color: #fff;
            border: 1px solid var(--border-color);
            border-left: 5px solid var(--accent-jokbo);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .match-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .match-title {
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .match-tag {
            font-size: 0.8rem;
            background-color: var(--highlight-jokbo);
            color: #856404;
            padding: 3px 8px;
            border-radius: 12px;
        }

        .match-snippet {
            font-size: 0.95rem;
            color: #555;
            line-height: 1.5;
        }
        
        /* 2. AI íŠœí„° íƒ­ */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 20px;
        }
        
        .message {
            margin-bottom: 15px;
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 18px;
            line-height: 1.5;
            font-size: 0.95rem;
            position: relative;
            clear: both;
        }
        
        .message.ai {
            background-color: #f1f3f5;
            color: var(--text-color);
            float: left;
            border-bottom-left-radius: 5px;
        }
        
        .message.user {
            background-color: var(--primary-color);
            color: white;
            float: right;
            border-bottom-right-radius: 5px;
        }
        
        .chat-input-area {
            border-top: 1px solid var(--border-color);
            padding-top: 15px;
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            outline: none;
            transition: border-color 0.2s;
        }
        
        .chat-input:focus {
            border-color: var(--primary-color);
        }
        
        .send-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        
        .send-btn:hover {
            background-color: #2980b9;
        }

        /* 3. ì €ì¥ë¨ íƒ­ */
        .saved-list {
            list-style: none;
        }
        
        .saved-item {
            background-color: #fff;
            border: 1px solid var(--border-color);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            position: relative;
        }
        
        .saved-item::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            width: 10px;
            height: 10px;
            background-color: var(--primary-color);
            border-radius: 50%;
        }
        
        .saved-content {
            padding-left: 20px;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .saved-date {
            display: block;
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 8px;
            padding-left: 20px;
        }

        /* ìŠ¤í¬ë¡¤ ì´ë™ ì‹œ ê°•ì¡° íš¨ê³¼ */
        .flash-highlight {
            animation: flash 2s ease-out;
        }

        @keyframes flash {
            0%, 100% { background-color: transparent; }
            50% { background-color: rgba(255, 243, 205, 0.7); } /* ì—°í•œ ë…¸ë‘ */
        }
        
    </style>
</head>
<body>

    <main class="main-viewer">
        <div class="document-container">
            <h1 class="lecture-title">ë§ˆì¼€íŒ… ì›ë¡  3ì£¼ì°¨: ì†Œë¹„ì í–‰ë™ì˜ ì´í•´</h1>
            
            <div class="lecture-content">
                <p>ì†Œë¹„ì í–‰ë™ì€ ë§ˆì¼€íŒ… ì „ëµ ìˆ˜ë¦½ì— ìˆì–´ ê°€ì¥ ê¸°ì´ˆì ì´ê³  ì¤‘ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤. ê¸°ì—…ì€ ì†Œë¹„ìê°€ ì–´ë–¤ ë™ê¸°ë¡œ ì œí’ˆì„ êµ¬ë§¤í•˜ê³ , ì–´ë–¤ ê³¼ì •ì„ ê±°ì³ ì˜ì‚¬ê²°ì •ì„ ë‚´ë¦¬ëŠ”ì§€ ê¹Šì´ ì´í•´í•´ì•¼ í•©ë‹ˆë‹¤.</p>
                
                <p id="para-1">
                    ì†Œë¹„ìì˜ êµ¬ë§¤ ì˜ì‚¬ê²°ì • ê³¼ì •ì€ ì¼ë°˜ì ìœ¼ë¡œ 5ë‹¨ê³„ë¡œ ë‚˜ë‰©ë‹ˆë‹¤. ì²« ë²ˆì§¸ëŠ” <span class="jokbo-highlight" id="highlight-1" data-tip="ğŸ”¥ ì¡±ë³´ Tip: ë¬¸ì œ ì¸ì‹ ë‹¨ê³„ì˜ ìœ í˜•(ë‚´ì /ì™¸ì  ìê·¹)ì„ ë¬»ëŠ” ë¬¸ì œê°€ ìì£¼ ì¶œì œë©ë‹ˆë‹¤.">ë¬¸ì œ ì¸ì‹(Problem Recognition)</span> ë‹¨ê³„ì…ë‹ˆë‹¤. ì´ëŠ” ì†Œë¹„ìê°€ í˜„ì¬ ìƒíƒœì™€ ë°”ë¼ëŠ” ì´ìƒì ì¸ ìƒíƒœ ê°„ì˜ ì°¨ì´ë¥¼ ëŠë¼ê³ , ì´ë¥¼ í•´ê²°í•˜ë ¤ëŠ” ìš•êµ¬ê°€ ë°œìƒí•˜ëŠ” ì‹œì ì…ë‹ˆë‹¤.
                </p>
                
                <p id="para-2">
                    ë‘ ë²ˆì§¸ëŠ” ì •ë³´ íƒìƒ‰(Information Search) ë‹¨ê³„ì…ë‹ˆë‹¤. ì†Œë¹„ìëŠ” ë‚´ì  íƒìƒ‰(ê¸°ì–µ ì† ì •ë³´)ê³¼ <span class="jokbo-highlight" id="highlight-2" data-tip="ğŸ”¥ ì¡±ë³´ Tip: ì™¸ì  íƒìƒ‰ì˜ ì •ë³´ì›(ìƒì—…ì , ê³µê³µì , ê²½í—˜ì  ë“±)ì„ êµ¬ë¶„í•˜ëŠ” ë¬¸ì œê°€ ë‚˜ì˜µë‹ˆë‹¤.">ì™¸ì  íƒìƒ‰(ì™¸ë¶€ ì •ë³´ì›)</span>ì„ í†µí•´ ë¬¸ì œ í•´ê²°ì— í•„ìš”í•œ ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤. ê´€ì—¬ë„ê°€ ë†’ì„ìˆ˜ë¡ ì™¸ì  íƒìƒ‰ì˜ ë¹„ì¤‘ì´ ì»¤ì§‘ë‹ˆë‹¤.
                </p>
                
                <p>
                    ì„¸ ë²ˆì§¸ëŠ” ëŒ€ì•ˆ í‰ê°€(Evaluation of Alternatives) ë‹¨ê³„ì…ë‹ˆë‹¤. ìˆ˜ì§‘ëœ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê³ ë ¤êµ°(Consideration Set)ì— ì†í•œ ì œí’ˆë“¤ì„ íŠ¹ì • ê¸°ì¤€ì— ë”°ë¼ ë¹„êµí•˜ê³  í‰ê°€í•©ë‹ˆë‹¤. ì´ë•Œ ì†Œë¹„ìëŠ” ë³´ì™„ì  ë°©ì‹ì´ë‚˜ ë¹„ë³´ì™„ì  ë°©ì‹ ë“± ë‹¤ì–‘í•œ í‰ê°€ ê·œì¹™ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
                </p>
                
                <p>
                    ë„¤ ë²ˆì§¸ëŠ” êµ¬ë§¤(Purchase) ë‹¨ê³„ì´ë©°, ë§ˆì§€ë§‰ ë‹¤ì„¯ ë²ˆì§¸ëŠ” êµ¬ë§¤ í›„ í–‰ë™(Post-purchase Behavior) ë‹¨ê³„ì…ë‹ˆë‹¤. íŠ¹íˆ êµ¬ë§¤ í›„ ë§Œì¡±/ë¶ˆë§Œì¡±ê³¼ ì¸ì§€ ë¶€ì¡°í™”(Cognitive Dissonance)ëŠ” í–¥í›„ ì¬êµ¬ë§¤ ì˜ë„ì— í° ì˜í–¥ì„ ë¯¸ì¹˜ë¯€ë¡œ ë§ˆì¼€í„°ì—ê²Œ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.
                </p>
            </div>
        </div>
    </main>

    <aside class="sidebar">
        <div class="sidebar-tabs">
            <button class="tab-button active" onclick="openTab(event, 'jokbo')">
                <i class="fas fa-file-signature"></i> ì¡±ë³´ ë§¤ì¹­
            </button>
            <button class="tab-button" onclick="openTab(event, 'ai-tutor')">
                <i class="fas fa-robot"></i> AI íŠœí„°
            </button>
            <button class="tab-button" onclick="openTab(event, 'saved')">
                <i class="fas fa-bookmark"></i> ì €ì¥ë¨
            </button>
        </div>

        <div id="jokbo" class="sidebar-content active">
            <div class="upload-section">
                <p style="margin-bottom: 15px; color: var(--text-light);">
                    <i class="fas fa-cloud-upload-alt fa-3x"></i><br><br>
                    ì¡±ë³´ íŒŒì¼(PDF, ì´ë¯¸ì§€)ì„ ì—…ë¡œë“œí•˜ë©´<br>ê°•ì˜ë¡ê³¼ ë¹„êµ ë¶„ì„í•©ë‹ˆë‹¤.
                </p>
                <button class="upload-btn" onclick="loadDemoJokbo()">
                    <i class="fas fa-file-upload"></i> ì¡±ë³´ íŒŒì¼ ì—…ë¡œë“œ (Demo)
                </button>
            </div>

            <div id="match-results" style="display: none;">
                <h3 style="margin-bottom: 15px; color: var(--secondary-color);">
                    <i class="fas fa-check-circle" style="color: var(--primary-color);"></i> ë¶„ì„ ì™„ë£Œ: 2ê±´ ë§¤ì¹­
                </h3>
                <ul class="match-list">
                    <li class="match-item" onclick="scrollToHighlight('highlight-1')">
                        <div class="match-title">
                            <span>ë¬¸ì œ ì¸ì‹ ë‹¨ê³„</span>
                            <span class="match-tag">2023 ì¤‘ê°„</span>
                        </div>
                        <p class="match-snippet">"ë¬¸ì œ ì¸ì‹ ë‹¨ê³„ì—ì„œ ì†Œë¹„ìê°€ ëŠë¼ëŠ” ë‚´ì /ì™¸ì  ìê·¹ì˜ ì˜ˆë¥¼ ì„œìˆ í•˜ì‹œì˜¤." (5ì )</p>
                    </li>
                    <li class="match-item" onclick="scrollToHighlight('highlight-2')">
                        <div class="match-title">
                            <span>ì™¸ì  ì •ë³´ íƒìƒ‰</span>
                            <span class="match-tag">2022 ê¸°ë§</span>
                        </div>
                        <p class="match-snippet">"ë‹¤ìŒ ì¤‘ ì™¸ì  íƒìƒ‰ì˜ ìƒì—…ì  ì •ë³´ì›ì— í•´ë‹¹í•˜ì§€ ì•ŠëŠ” ê²ƒì€?" (ê°ê´€ì‹)</p>
                    </li>
                </ul>
            </div>
        </div>

        <div id="ai-tutor" class="sidebar-content">
            <div class="chat-container">
                <div class="chat-messages">
                    <div class="message ai">
                        ì•ˆë…•í•˜ì„¸ìš”! ğŸ‘‹ ë§ˆì¼€íŒ… ì›ë¡  3ì£¼ì°¨ í•™ìŠµì„ ë„ì™€ë“œë¦´ AI íŠœí„°ì…ë‹ˆë‹¤.<br>
                        ê°•ì˜ ë‚´ìš©ì´ë‚˜ ì¡±ë³´ì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì´ ìˆë‹¤ë©´ ì–¸ì œë“  ë¬¼ì–´ë³´ì„¸ìš”!
                    </div>
                    </div>
                <div class="chat-input-area">
                    <input type="text" class="chat-input" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”...">
                    <button class="send-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="saved" class="sidebar-content">
            <h3 style="margin-bottom: 20px; color: var(--secondary-color);">
                <i class="fas fa-star" style="color: var(--accent-jokbo);"></i> ì €ì¥ëœ ë…¸íŠ¸
            </h3>
            <ul class="saved-list">
                <li class="saved-item">
                    <div class="saved-content">
                        êµ¬ë§¤ ì˜ì‚¬ê²°ì • 5ë‹¨ê³„ ì¤‘ 'ë¬¸ì œ ì¸ì‹'ì´ ê°€ì¥ ì¤‘ìš”í•¨. ë§ˆì¼€í„°ëŠ” ì´ ë‹¨ê³„ì—ì„œ ì†Œë¹„ìì˜ ìš•êµ¬ë¥¼ ìê·¹í•´ì•¼ í•¨.
                    </div>
                    <span class="saved-date">2024. 05. 20. ì €ì¥ë¨</span>
                </li>
                <li class="saved-item">
                    <div class="saved-content">
                        ì¸ì§€ ë¶€ì¡°í™”(Cognitive Dissonance): êµ¬ë§¤ í›„ ìì‹ ì˜ ì„ íƒì— ëŒ€í•´ ë¶ˆì•ˆê°ì„ ëŠë¼ëŠ” ì‹¬ë¦¬ ìƒíƒœ. ì¬êµ¬ë§¤ë¥¼ ë§‰ëŠ” ìš”ì¸ì´ ë¨.
                    </div>
                    <span class="saved-date">2024. 05. 19. ì €ì¥ë¨</span>
                </li>
            </ul>
        </div>
    </aside>

    <script>
        // --- íƒ­ ì „í™˜ ê¸°ëŠ¥ ---
        function openTab(evt, tabName) {
            // ëª¨ë“  íƒ­ ì½˜í…ì¸  ìˆ¨ê¸°ê¸°
            const tabContents = document.getElementsByClassName("sidebar-content");
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }

            // ëª¨ë“  íƒ­ ë²„íŠ¼ ë¹„í™œì„±í™”
            const tabButtons = document.getElementsByClassName("tab-button");
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove("active");
            }

            // ì„ íƒëœ íƒ­ ì½˜í…ì¸  ë³´ì—¬ì£¼ê¸° ë° ë²„íŠ¼ í™œì„±í™”
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        // --- ì¡±ë³´ ë°ëª¨ ë¡œë“œ ê¸°ëŠ¥ ---
        function loadDemoJokbo() {
            const uploadSection = document.querySelector('.upload-section');
            const matchResults = document.getElementById('match-results');
            const uploadBtn = document.querySelector('.upload-btn');

            // ë¡œë”© í‘œì‹œ
            uploadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ë¶„ì„ ì¤‘...';
            uploadBtn.disabled = true;

            setTimeout(() => {
                // ì—…ë¡œë“œ ì„¹ì…˜ ìˆ¨ê¸°ê³  ê²°ê³¼ í‘œì‹œ
                uploadSection.style.display = 'none';
                matchResults.style.display = 'block';

                // ê°•ì˜ë¡ í•˜ì´ë¼ì´íŠ¸ í™œì„±í™”
                const highlights = document.getElementsByClassName('jokbo-highlight');
                for (let i = 0; i < highlights.length; i++) {
                    highlights[i].classList.add('active');
                }

                // ì•Œë¦¼ (ì„ íƒ ì‚¬í•­)
                // alert("ì¡±ë³´ ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ë§¤ì¹­ëœ ë‚´ìš©ì„ í™•ì¸í•´ë³´ì„¸ìš”.");
            }, 1500); // 1.5ì´ˆ í›„ ì‹¤í–‰
        }

        // --- ìŠ¤í¬ë¡¤ ì´ë™ ë° ê°•ì¡° ê¸°ëŠ¥ ---
        function scrollToHighlight(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                // ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤ ì´ë™
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // ê°•ì¡° íš¨ê³¼ ì ìš©
                const parentP = element.closest('p'); // í•´ë‹¹ ë¬¸ë‹¨ ì „ì²´ ê°•ì¡°
                parentP.classList.add('flash-highlight');

                // ì• ë‹ˆë©”ì´ì…˜ ì¢…ë£Œ í›„ í´ë˜ìŠ¤ ì œê±°
                setTimeout(() => {
                    parentP.classList.remove('flash-highlight');
                }, 2000);
            }
        }
    </script>
</body>
</html>
        }

        /* íˆ´íŒ (ì¡±ë³´ ë¬¸ì œ ë³´ì—¬ì£¼ê¸°) */
        .match-highlight:hover::after {
            content: attr(data-question);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            width: 250px;
            z-index: 10;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            pointer-events: none;
        }

        /* --- ì˜¤ë¥¸ìª½: ìŠ¤ë§ˆíŠ¸ ì‚¬ì´ë“œë°” --- */
        .sidebar {
            flex: 1;
            max-width: 450px;
            background: white;
            border-left: 1px solid var(--border);
            display: flex;
            flex-direction: column;
        }

        /* ì‚¬ì´ë“œë°” í—¤ë” íƒ­ */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            background: #fafafa;
        }
        .tab-btn {
            flex: 1;
            padding: 15px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-weight: 600;
            color: #777;
            transition: 0.2s;
        }
        .tab-btn.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            background: white;
        }
        .tab-btn i { margin-right: 5px; }

        /* íƒ­ ì½˜í…ì¸  ì˜ì—­ */
        .tab-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ */
        }
        .tab-content.active { display: flex; flex-direction: column; }

        /* 1. ì¡±ë³´ ë§¤ì¹­ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .jokbo-list-item {
            background: white;
            border: 1px solid #eee;
            border-left: 4px solid var(--accent-jokbo);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 6px;
            cursor: pointer;
            transition: 0.2s;
        }
        .jokbo-list-item:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .q-tag { font-size: 11px; background: #eee; padding: 2px 6px; border-radius: 4px; color: #555; }
        .q-text { font-size: 14px; font-weight: bold; margin-top: 5px; display: block;}

        /* 2. ì±„íŒ… UI ìŠ¤íƒ€ì¼ */
        .chat-container { flex: 1; display: flex; flex-direction: column; }
        .chat-messages { flex: 1; overflow-y: auto; padding-bottom: 20px; }
        
        .message { margin-bottom: 15px; max-width: 90%; font-size: 14px; line-height: 1.5; position: relative; }
        .message.ai { align-self: flex-start; }
        .message.user { align-self: flex-end; margin-left: auto; background: var(--primary); color: white; padding: 10px 15px; border-radius: 12px 12px 0 12px; }
        
        .ai-bubble {
            background: #f1f3f8;
            padding: 15px;
            border-radius: 12px 12px 12px 0;
            color: #333;
        }
        .ai-source {
            font-size: 11px; color: #666; margin-top: 5px; display: flex; align-items: center; gap: 5px;
        }
        
        /* ë“œë˜ê·¸/ì €ì¥ ë²„íŠ¼ (AI ë‹µë³€ ë‚´) */
        .save-snippet-btn {
            background: white; border: 1px solid #ddd; padding: 2px 8px; border-radius: 12px; cursor: pointer; font-size: 11px; margin-left: auto;
        }
        .save-snippet-btn:hover { background: var(--secondary); color: var(--primary); }

        .input-area {
            display: flex; gap: 10px; padding-top: 15px; border-top: 1px solid #eee;
        }
        .input-area input {
            flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 20px; outline: none;
        }
        .send-btn {
            background: var(--primary); color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer;
        }

        /* 3. ì €ì¥ëœ ë…¸íŠ¸ ìŠ¤íƒ€ì¼ */
        .saved-card {
            background: #fff;
            border: 1px solid #e0e0e0;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 12px;
            position: relative;
            cursor: pointer;
        }
        .saved-card::before {
            content: ''; position: absolute; left: 0; top: 10px; bottom: 10px; width: 4px; background: var(--accent-ai); border-radius: 0 4px 4px 0;
        }
        .saved-card.jokbo-type::before { background: var(--accent-jokbo); } /* ì¡±ë³´ ì €ì¥ì€ ì´ˆë¡ìƒ‰ */

        /* ìœ í‹¸ë¦¬í‹° */
        .focus-anim { animation: flash 1.5s ease; }
        @keyframes flash {
            0% { background-color: rgba(255, 235, 59, 0.5); }
            100% { background-color: transparent; }
        }

        .upload-btn {
            width: 100%; padding: 12px; background: #333; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-bottom: 15px;
        }
        .upload-btn:hover { background: #555; }

    </style>
</head>
<body>

    <div class="viewer-section" id="viewer">
        <div class="pdf-page" id="page-1">
            <div style="float:right; color:#999; font-size:12px;">Page 1</div>
            <h2>Evidence That Viral DNA Can Program Cells</h2>
            <ul>
                <li>More evidence for DNA as the genetic material came from studies of viruses that infect bacteria.</li>
                <li>Such viruses, called 
                    <span class="match-highlight" id="ctx-phage" data-question="Q14. What are Bacteriophages used for in molecular genetics?">
                        bacteriophages (or phages)
                    </span>, are widely used in molecular genetics research.
                </li>
                <li>A virus is DNA (or RNA) enclosed by a protective protein coat.</li>
                <li id="ctx-reproduce">Viruses must infect cells and take over the cells' metabolic machinery in order to reproduce.</li>
            </ul>
            <div style="background:#f9f9f9; padding:15px; margin-top:20px; border-radius:8px;">
                <strong>Key Experiment:</strong> Hershey and Chase designed an experiment showing that only the DNA of the T2 phage, and not the protein, enters an <em>E. coli</em> cell during infection.
            </div>
        </div>

        <div class="pdf-page" id="page-2">
            <div style="float:right; color:#999; font-size:12px;">Page 2</div>
            <h2>The Cell Cycle & Mitosis</h2>
            <p>
                In 
                <span class="match-highlight" id="ctx-mitosis" data-question="Q8. ì•”ì´ ì¦ì‹í•˜ëŠ” ë°ì— Mitosisê°€ í™œìš©ë˜ë‚˜?">
                    mitosis
                </span>, the genetic material is divided equally into two new nuclei.
            </p>
            <ul>
                <li><strong>Prophase:</strong> Chromatin condenses into chromosomes.</li>
                <li>
                    <strong>Metaphase:</strong> Chromosomes line up at the metaphase plate. 
                    <span class="match-highlight" id="ctx-meta" data-question="Q14. In mitosis, how many chromosomes (N) are in the cell on metaphase?">
                        (Checkpoint for spindle attachment)
                    </span>
                </li>
                <li><strong>Anaphase:</strong> Sister chromatids separate.</li>
            </ul>
            <p id="ctx-membrane">
                The cell membrane plays a crucial role in cytokinesis, pinching the cell into two daughter cells.
            </p>
        </div>
    </div>

    <div class="sidebar">
        <div class="tabs">
            <button class="tab-btn active" onclick="setTab('jokbo')"><i class="fas fa-list-check"></i> ì¡±ë³´ ë§¤ì¹­</button>
            <button class="tab-btn" onclick="setTab('chat')"><i class="fas fa-robot"></i> AI íŠœí„°</button>
            <button class="tab-btn" onclick="setTab('saved')"><i class="fas fa-bookmark"></i> ì €ì¥ë¨ <span id="save-count" style="font-size:10px; background:red; color:white; padding:2px 5px; border-radius:10px; display:none;">0</span></button>
        </div>

        <div id="tab-jokbo" class="tab-content active">
            <button class="upload-btn" onclick="analyzeJokbo()">
                <i class="fas fa-file-upload"></i> ì¡±ë³´ íŒŒì¼ ì—…ë¡œë“œ (Demo)
            </button>
            
            <div id="jokbo-results" style="display:none;">
                <div style="font-size:12px; color:#666; margin-bottom:10px;">
                    ì´ <b style="color:var(--accent-jokbo)">3ê°œ</b>ì˜ ì—°ê´€ëœ ë‚´ìš©ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.
                </div>

                <div class="jokbo-list-item" onclick="jumpTo('ctx-mitosis')">
                    <span class="q-tag">2024 ì¤‘ê°„ê³ ì‚¬ Q8</span>
                    <span class="q-text">ì•”ì´ ì¦ì‹í•˜ëŠ” ë°ì— Mitosisê°€ í™œìš©ë˜ë‚˜?</span>
                    <div style="margin-top:8px; font-size:12px; color:#666;">
                        <i class="fas fa-link"></i> Page 2 ì—°ê²°ë¨
                        <button class="save-snippet-btn" onclick="saveItem('ì¡±ë³´', 'ì•” ì¦ì‹ê³¼ Mitosis ê´€ê³„', 'page-2'); event.stopPropagation();">ì €ì¥</button>
                    </div>
                </div>

                <div class="jokbo-list-item" onclick="jumpTo('ctx-meta')">
                    <span class="q-tag">2023 ê¸°ë§ê³ ì‚¬ Q14</span>
                    <span class="q-text">Metaphaseì˜ ì—¼ìƒ‰ì²´ ìˆ˜ì™€ DNA í•¨ëŸ‰ì€?</span>
                    <div style="margin-top:8px; font-size:12px; color:#666;">
                        <i class="fas fa-link"></i> Page 2 ì—°ê²°ë¨
                        <button class="save-snippet-btn" onclick="saveItem('ì¡±ë³´', 'Metaphase ì—¼ìƒ‰ì²´ ìˆ˜ ê³„ì‚°', 'page-2'); event.stopPropagation();">ì €ì¥</button>
                    </div>
                </div>

                <div class="jokbo-list-item" onclick="jumpTo('ctx-phage')">
                    <span class="q-tag">ì„œìˆ í˜• Q1</span>
                    <span class="q-text">Bacteriophagesì˜ ì—­í•  ì„œìˆ </span>
                    <div style="margin-top:8px; font-size:12px; color:#666;">
                        <i class="fas fa-link"></i> Page 1 ì—°ê²°ë¨
                        <button class="save-snippet-btn" onclick="saveItem('ì¡±ë³´', 'Bacteriophages ì •ì˜', 'page-1'); event.stopPropagation();">ì €ì¥</button>
                    </div>
                </div>
            </div>
            
            <div id="jokbo-placeholder" style="text-align:center; margin-top:50px; color:#999;">
                <i class="fas fa-file-pdf" style="font-size:40px; margin-bottom:10px;"></i><br>
                ì¡±ë³´ PDFë‚˜ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ë©´<br>ê°•ì˜ë¡ê³¼ ë¹„êµ ë¶„ì„í•©ë‹ˆë‹¤.
            </div>
        </div>

        <div id="tab-chat" class="tab-content">
            <div class="chat-container">
                <div class="chat-messages" id="chat-box">
                    <div class="message ai">
                        <div class="ai-bubble">
                            ì•ˆë…•í•˜ì„¸ìš”! ê°•ì˜ë¡ê³¼ ì¡±ë³´ë¥¼ ëª¨ë‘ í•™ìŠµí–ˆìŠµë‹ˆë‹¤.<br>
                            ê¶ê¸ˆí•œ ì ì„ ë¬¼ì–´ë³´ì‹œê±°ë‚˜, <b>"ì¡±ë³´ ìš”ì•½í•´ì¤˜"</b>ë¼ê³  í•´ë³´ì„¸ìš”.
                        </div>
                    </div>
                </div>
                <div class="input-area">
                    <input type="text" id="chat-input" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..." onkeypress="handleKey(event)">
                    <button class="send-btn" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>

        <div id="tab-saved" class="tab-content">
            <div id="saved-list">
                <div style="text-align:center; color:#999; margin-top:50px;">
                    <i class="far fa-bookmark" style="font-size:30px; margin-bottom:10px;"></i><br>
                    ì¤‘ìš”í•œ ì¡±ë³´ ë¬¸ì œë‚˜<br>AI ë‹µë³€ì„ ì €ì¥í•´ë³´ì„¸ìš”.
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. íƒ­ ì „í™˜ ë¡œì§ ---
        function setTab(tabName) {
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” & ì„¤ì •
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active'); // í´ë¦­ëœ ë²„íŠ¼ í™œì„±í™” (ì£¼ì˜: event ê°ì²´ ì‚¬ìš©)

            // ì½˜í…ì¸  ì´ˆê¸°í™” & ì„¤ì •
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(`tab-${tabName}`).classList.add('active');

            // íƒ­ ë²„íŠ¼ í´ë¦­ ì‹œ event.currentTargetì„ ì¡ê¸° ìœ„í•´ html onclickì—ì„œ í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ìˆ˜ì • í•„ìš”í•  ìˆ˜ ìˆìŒ
            // í•˜ì§€ë§Œ í˜„ì¬ êµ¬ì¡°ìƒ ìœ„ ì½”ë“œëŠ” ì‘ë™í•¨. ë” ì•ˆì „í•˜ê²Œ í•˜ê¸° ìœ„í•´ ì¸ë±ìŠ¤ë¡œ ì²˜ë¦¬ ê°€ëŠ¥.
            const buttons = document.querySelectorAll('.tab-btn');
            if(tabName === 'jokbo') buttons[0].classList.add('active');
            if(tabName === 'chat') buttons[1].classList.add('active');
            if(tabName === 'saved') buttons[2].classList.add('active');
        }

        // --- 2. ì¡±ë³´ ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜ ---
        function analyzeJokbo() {
            const btn = document.querySelector('.upload-btn');
            const placeholder = document.getElementById('jokbo-placeholder');
            const results = document.getElementById('jokbo-results');

            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ë¶„ì„ ì¤‘...';
            
            setTimeout(() => {
                btn.innerHTML = '<i class="fas fa-check"></i> ë¶„ì„ ì™„ë£Œ';
                btn.style.background = '#2ecc71';
                placeholder.style.display = 'none';
                results.style.display = 'block';

                // ê°•ì˜ë¡ ë‚´ í•˜ì´ë¼ì´íŠ¸ í™œì„±í™”
                document.querySelectorAll('.match-highlight').forEach(el => {
                    el.classList.add('active');
                    // í´ë¦­ ì‹œ í•´ë‹¹ ë¬¸ì œ ì •ë³´ í‘œì‹œ (alert ëŒ€ì‹  ì½˜ì†”ì´ë‚˜ UIë¡œ í™•ì¥ ê°€ëŠ¥)
                    el.onclick = function() {
                        alert("ì—°ê´€ ë¬¸ì œ: " + this.getAttribute('data-question'));
                    }
                });

                // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
                alert("ë¶„ì„ ì™„ë£Œ! ê°•ì˜ë¡ì— ì¶œì œ ë¹ˆë„ê°€ ë†’ì€ ë¶€ë¶„ì´ ì´ˆë¡ìƒ‰ìœ¼ë¡œ í‘œì‹œë˜ì—ˆìŠµë‹ˆë‹¤.");
            }, 1500);
        }

        // --- 3. ë”¥ ë§í‚¹ (Deep Linking) & ìŠ¤í¬ë¡¤ ---
        function jumpTo(elementId) {
            const target = document.getElementById(elementId);
            if (target) {
                target.scrollIntoView({ behavior: 'smooth', block: 'center' });
                target.classList.add('focus-anim');
                setTimeout(() => target.classList.remove('focus-anim'), 2000);
            }
        }

        // --- 4. AI ì±„íŒ… ë¡œì§ ---
        function handleKey(e) {
            if (e.key === 'Enter') sendMessage();
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const text = input.value.trim();
            if (!text) return;

            // ìœ ì € ë©”ì‹œì§€ ì¶”ê°€
            addMessage('user', text);
            input.value = '';

            // AI ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜
            setTimeout(() => {
                let reply = "";
                let sourcePage = "";

                if (text.includes("ì¡±ë³´") || text.includes("ìš”ì•½")) {
                    reply = "ì´ë²ˆ ì¡±ë³´ ë¶„ì„ ê²°ê³¼, <b>Mitosis(ìœ ì‚¬ë¶„ì—´)</b>ì™€ <b>Bacteriophages</b> ê´€ë ¨ ë¬¸ì œê°€ ê°€ì¥ ë§ì´ ì¶œì œë˜ì—ˆìŠµë‹ˆë‹¤. íŠ¹íˆ 2í˜ì´ì§€ì˜ Metaphase ë‹¨ê³„ì—ì„œ ì—¼ìƒ‰ì²´ ìˆ˜ë¥¼ ë¬»ëŠ” í•¨ì • ë¬¸ì œê°€ ìì£¼ ë‚˜ì˜µë‹ˆë‹¤.";
                    sourcePage = "page-2";
                } else if (text.includes("Mitosis") || text.includes("ë¶„ì—´")) {
                    reply = "MitosisëŠ” ì„¸í¬ ì£¼ê¸° ì¤‘ í•µì´ ë¶„ì—´í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. ì¡±ë³´(Q8)ì— ë”°ë¥´ë©´ ì•”ì„¸í¬ ì¦ì‹ ê¸°ì „ê³¼ ì—°ê´€ì§€ì–´ ì„œìˆ í•˜ëŠ” ë¬¸ì œê°€ ì¶œì œë˜ì—ˆìŠµë‹ˆë‹¤.";
                    sourcePage = "page-2";
                } else if (text.includes("ë°”ì´ëŸ¬ìŠ¤") || text.includes("DNA")) {
                    reply = "ë°”ì´ëŸ¬ìŠ¤ DNAê°€ ìœ ì „ ë¬¼ì§ˆì„ì„ ì¦ëª…í•œ Hershey-Chase ì‹¤í—˜ì´ ì¤‘ìš”í•©ë‹ˆë‹¤(1í˜ì´ì§€). ë‹¨ë°±ì§ˆì´ ì•„ë‹Œ DNAê°€ ì„¸í¬ë¡œ ë“¤ì–´ê°„ë‹¤ëŠ” ì ì„ ê¼­ ê¸°ì–µí•˜ì„¸ìš”.";
                    sourcePage = "page-1";
                } else {
                    reply = "ê°•ì˜ë¡ê³¼ ì¡±ë³´ ë‚´ì—ì„œ í•´ë‹¹ ë‚´ìš©ì„ ì°¾ê³  ìˆìŠµë‹ˆë‹¤. 'Mitosis'ë‚˜ 'ë°”ì´ëŸ¬ìŠ¤'ì— ëŒ€í•´ ë¬¼ì–´ë´ ì£¼ì‹œê² ì–´ìš”?";
                }

                addMessage('ai', reply, sourcePage);
            }, 800);
        }

        function addMessage(type, text, sourceId = null) {
            const box = document.getElementById('chat-box');
            const msgDiv = document.createElement('div');
            msgDiv.className = `message ${type}`;
            
            let contentHtml = text;
            if (type === 'ai') {
                contentHtml = `<div class="ai-bubble">
                                ${text}
                                <div class="ai-source">
                                    ${sourceId ? `<i class="fas fa-book-open"></i> <span onclick="jumpTo('${sourceId}')" style="cursor:pointer; text-decoration:underline;">ê´€ë ¨ í˜ì´ì§€ ì´ë™</span>` : ''}
                                    <button class="save-snippet-btn" onclick="saveItem('AI ë‹µë³€', '${text.substring(0,15)}...', '${sourceId || 'page-1'}')">ì €ì¥</button>
                                </div>
                               </div>`;
            } else {
                msgDiv.innerText = text;
            }

            if (type === 'ai') msgDiv.innerHTML = contentHtml;
            
            box.appendChild(msgDiv);
            box.scrollTop = box.scrollHeight;
        }

        // --- 5. ì €ì¥ ê¸°ëŠ¥ (Save Logic) ---
        let savedCount = 0;
        function saveItem(type, text, targetId) {
            const list = document.getElementById('saved-list');
            const emptyMsg = list.querySelector('div');
            if (emptyMsg) emptyMsg.style.display = 'none';

            const card = document.createElement('div');
            card.className = `saved-card ${type === 'ì¡±ë³´' ? 'jokbo-type' : ''}`;
            card.onclick = () => jumpTo(targetId);
            card.innerHTML = `
                <div style="font-size:10px; color:#888; margin-bottom:5px;">
                    <span style="background:#eee; padding:2px 5px; border-radius:3px;">${type}</span> 
                    ${targetId.replace('page-', '')}í˜ì´ì§€
                </div>
                <div style="font-weight:bold; font-size:14px;">${text}</div>
            `;
            
            list.prepend(card);
            
            // ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
            savedCount++;
            const badge = document.getElementById('save-count');
            badge.innerText = savedCount;
            badge.style.display = 'inline-block';

            // íƒ­ ì´ë™ íš¨ê³¼ (ì„ íƒì‚¬í•­)
            // setTab('saved'); 
            
            // ì €ì¥ ì™„ë£Œ í”¼ë“œë°± (ê°„ë‹¨í•œ ì• ë‹ˆë©”ì´ì…˜ì´ë‚˜ í† ìŠ¤íŠ¸ ëŒ€ì‹  ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½ ë“± ê°€ëŠ¥)
        }
        
        // ì´ˆê¸°í™”: ì²« ë²ˆì§¸ íƒ­ ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë§ì¶”ê¸°
        document.querySelector('.tab-btn').classList.add('active');
    </script>
</body>
</html>
                setSelectedText('');
                alert("ê°•ì˜ë¡ ì˜†ì— ë©”ëª¨ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
            };

            return (
                <div className="flex h-screen bg-gray-100 font-sans text-gray-800 overflow-hidden">
                    
                    {/* ì™¼ìª½: ìŠ¤ë§ˆíŠ¸ ê°•ì˜ë¡ */}
                    <div className="w-3/5 bg-white p-6 overflow-y-auto border-r border-gray-200 shadow-sm">
                        <header className="mb-6 flex items-center justify-between">
                            <h1 className="text-2xl font-bold flex items-center gap-2 text-indigo-700">
                                ğŸ“„ ë§ˆì¼€íŒ… ì›ë¡  3ì£¼ì°¨
                            </h1>
                            <span className="text-sm bg-red-100 text-red-600 px-3 py-1 rounded-full font-medium flex items-center gap-1">
                                ğŸ¯ ì¡±ë³´ ë§¤ì¹­ 2ê±´
                            </span>
                        </header>

                        <div className="space-y-6">
                            {DEMO_SCRIPT.map((line) => (
                                <div key={line.id} className="relative group hover:bg-gray-50 p-2 rounded transition">
                                    <span className="text-xs text-gray-400 absolute -left-0 top-3 font-mono">{line.time}</span>
                                    
                                    <div className="pl-12 pr-4">
                                        <p className={`text-lg leading-relaxed ${line.isJokbo ? 'bg-red-50 decoration-red-200 underline decoration-2 underline-offset-4' : ''}`}>
                                            {line.text}
                                        </p>
                                        
                                        {line.isJokbo && (
                                            <div className="mt-2 text-sm text-red-600 bg-white border border-red-200 p-2 rounded-md shadow-sm inline-block">
                                                ğŸ”¥ <b>ì¡±ë³´ Tip:</b> {line.jokboNote}
                                            </div>
                                        )}
                                    </div>

                                    {savedNotes.filter(note => note.relatedScriptId === line.id).map(note => (
                                        <div key={note.id} className="absolute right-0 top-0 translate-x-full w-48 bg-yellow-100 p-3 rounded-lg shadow-md border-l-4 border-yellow-400 ml-4">
                                            <span className="text-xs font-bold text-yellow-700 block mb-1">ğŸ“Œ AI ì±„íŒ… ì €ì¥ë¨</span>
                                            <p className="text-sm text-gray-700 line-clamp-3">{note.text}</p>
                                        </div>
                                    ))}
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* ì˜¤ë¥¸ìª½: AI íŠœí„° */}
                    <div className="w-2/5 flex flex-col bg-slate-50">
                        <div className="p-4 bg-white border-b border-gray-200 shadow-sm flex justify-between items-center">
                            <h2 className="font-bold text-lg flex items-center gap-2 text-slate-700">
                                ğŸ¤– AI í•™ìŠµ íŠœí„°
                            </h2>
                            {selectedText && (
                                <button 
                                    onClick={saveNote}
                                    className="bg-indigo-600 hover:bg-indigo-700 text-white text-xs px-3 py-1.5 rounded-full flex items-center gap-1 animate-bounce"
                                >
                                    ğŸ’¾ ì„ íƒ ë‚´ìš© ì €ì¥í•˜ê¸°
                                </button>
                            )}
                        </div>

                        <div className="flex-1 overflow-y-auto p-4 space-y-4" onMouseUp={handleTextSelect}>
                            {messages.map((msg, idx) => (
                                <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                    <div className={`max-w-[85%] p-3 rounded-2xl shadow-sm text-sm ${
                                        msg.role === 'user' 
                                            ? 'bg-indigo-600 text-white rounded-tr-none' 
                                            : 'bg-white text-gray-800 border border-gray-200 rounded-tl-none'
                                    }`}>
                                        {msg.text}
                                    </div>
                                </div>
                            ))}
                        </div>

                        <div className="p-4 bg-white border-t border-gray-200">
                            <div className="relative">
                                <input
                                    type="text"
                                    value={input}
                                    onChange={(e) => setInput(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && handleSend()}
                                    placeholder="ê°•ì˜ ë‚´ìš©ì´ë‚˜ ì¡±ë³´ì— ëŒ€í•´ ë¬¼ì–´ë³´ì„¸ìš”..."
                                    className="w-full pl-4 pr-12 py-3 bg-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 transition"
                                />
                                <button onClick={handleSend} className="absolute right-2 top-2 p-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                                    â¤
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DemoApp />);
    </script>
</body>
</html>

