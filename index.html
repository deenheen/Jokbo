<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Med-Study OS Final Demo v5.0</title>
    <style>
        /* [ê¸°ë³¸ ìŠ¤íƒ€ì¼] */
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Pretendard', sans-serif; }
        body { background-color: #e9ecef; height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden; }

        /* íƒœë¸”ë¦¿ í”„ë ˆì„ */
        .tablet-frame {
            width: 1400px; height: 900px; background: white; border-radius: 20px;
            box-shadow: 0 30px 80px rgba(0,0,0,0.2); border: 10px solid #222; display: flex; overflow: hidden;
        }

        /* --- ì™¼ìª½: PDF ë·°ì–´ (Full Size) --- */
        .left-panel {
            flex: 1.5; /* ë¹„ìœ¨ ì¦ê°€ (ë” ë„“ê²Œ) */
            background-color: #525659;
            display: flex; flex-direction: column;
            border-right: 1px solid #ddd;
            position: relative; /* ë²„íŠ¼ ë°°ì¹˜ë¥¼ ìœ„í•´ */
        }
        
        .pdf-header {
            height: 50px; background: #323639; color: #f1f1f1; display: flex; align-items: center;
            padding: 0 20px; justify-content: space-between; font-size: 14px; z-index: 10;
        }

        /* ë·°ì–´ ì˜ì—­ (ìŠ¤í¬ë¡¤ ì œê±°, ê½‰ ì°¨ê²Œ) */
        .pdf-viewer-container {
            flex: 1; position: relative; overflow: hidden; background: #525659;
            display: flex; justify-content: center; align-items: center;
        }

        .pdf-page {
            width: 95%; height: 95%; /* ê½‰ ì°¨ê²Œ */
            background: white; box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            padding: 50px; position: absolute;
            display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ */
            flex-direction: column;
            overflow-y: auto; /* ë‚´ìš© ë§ìœ¼ë©´ ë‚´ë¶€ ìŠ¤í¬ë¡¤ */
            border-radius: 4px;
        }
        .pdf-page.active { display: flex; animation: slideIn 0.3s ease-out; }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .page-num { position: absolute; bottom: 20px; right: 20px; color: #999; }
        .pdf-title { font-size: 28px; font-weight: bold; margin-bottom: 25px; color: #333; border-bottom: 3px solid #333; padding-bottom: 15px; }
        .pdf-text { font-size: 18px; line-height: 1.8; color: #333; text-align: justify; margin-bottom: 25px; }

        /* [í˜ì´ì§€ ë„˜ê¹€ ë²„íŠ¼] */
        .nav-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: 50px; height: 50px; background: rgba(0,0,0,0.6); color: white;
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            cursor: pointer; font-size: 24px; z-index: 100; transition: 0.2s;
            user-select: none;
        }
        .nav-btn:hover { background: rgba(0,0,0,0.8); transform: translateY(-50%) scale(1.1); }
        .nav-prev { left: 20px; }
        .nav-next { right: 20px; }
        .nav-btn.disabled { opacity: 0.2; cursor: default; pointer-events: none; }

        /* ë“œë˜ê·¸ëœ ë©”ëª¨ */
        .dropped-note {
            position: absolute; width: 220px; background-color: #fff9c4; border-left: 5px solid #fbc02d;
            padding: 10px; font-size: 14px; color: #333; box-shadow: 2px 4px 10px rgba(0,0,0,0.15);
            border-radius: 0 8px 8px 0; cursor: pointer; z-index: 50;
        }
        .dropped-note:hover { transform: scale(1.05); }

        /* --- ì˜¤ë¥¸ìª½: íŒ¨ë„ --- */
        .right-panel {
            flex: 0.7; display: flex; flex-direction: column; background: #f8f9fa; border-left: 1px solid #ddd; position: relative;
        }
        .tabs { display: flex; border-bottom: 1px solid #ddd; background: white; flex-shrink: 0; }
        .tab { flex: 1; padding: 15px 10px; text-align: center; cursor: pointer; font-weight: bold; color: #888; font-size: 14px; }
        .tab.active { color: #2196f3; border-bottom: 3px solid #2196f3; background: #f0f7ff; }
        
        .tab-content-container { flex: 1; overflow-y: auto; position: relative; }
        .tab-content { display: none; padding: 20px; padding-bottom: 80px; }
        .tab-content.active { display: block; }

        /* [ì±„íŒ… ìŠ¤íƒ€ì¼] */
        .chat-container { display: flex; flex-direction: column; gap: 15px; }
        .msg-date { text-align: center; font-size: 12px; color: #aaa; margin: 20px 0; position: relative; }
        .msg-date::before, .msg-date::after { content:""; position: absolute; top: 50%; width: 30%; height: 1px; background: #ddd; }
        .msg-date::before { left: 0; } .msg-date::after { right: 0; }
        .bubble { max-width: 90%; padding: 12px 16px; border-radius: 12px; font-size: 14px; line-height: 1.5; transition: background 0.5s; }
        .user-msg { align-self: flex-end; background: #e9ecef; color: #333; border-bottom-right-radius: 2px; }
        .ai-msg { align-self: flex-start; background: #e3f2fd; color: #0d47a1; border-bottom-left-radius: 2px; cursor: grab; }

        /* [ì¡±ë³´ ìŠ¤íƒ€ì¼] */
        .jokbo-card { background: white; padding: 15px; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 10px; display: none; }
        .jokbo-card.visible { display: block; animation: fadeIn 0.5s; }
        .badge { display: inline-block; padding: 3px 8px; background: #ffebee; color: #c62828; font-size: 11px; border-radius: 4px; font-weight: bold; margin-bottom: 5px;}

        /* [ìŠ¤í¬ë¦½íŠ¸ ìŠ¤íƒ€ì¼] */
        .script-segment { background: white; padding: 15px; border-radius: 8px; border: 1px solid #eee; margin-bottom: 15px; transition: all 0.3s; }
        .script-header { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 12px; color: #666; }
        .speaker { font-weight: bold; color: #2196f3; }
        .timestamp { background: #eee; padding: 2px 6px; border-radius: 4px; }
        .script-text { font-size: 14px; line-height: 1.6; color: #333; }
        
        /* [ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ ë°”] */
        .audio-player-bar {
            position: absolute; bottom: 0; left: 0; right: 0; height: 70px; background: white; border-top: 1px solid #ddd;
            display: flex; align-items: center; padding: 0 20px; gap: 15px; box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            display: none;
        }
        .audio-player-bar.visible { display: flex; }
        .play-btn { width: 40px; height: 40px; background: #2196f3; border-radius: 50%; display: flex; justify-content: center; align-items: center; color: white; font-size: 20px; cursor: pointer; flex-shrink: 0; }
        .timeline-container { flex: 1; display: flex; flex-direction: column; gap: 5px; }
        .timeline-bar { height: 6px; background: #eee; border-radius: 3px; position: relative; }
        .timeline-progress { position: absolute; left: 0; top: 0; height: 100%; width: 45%; background: #2196f3; border-radius: 3px; }
        .time-info { display: flex; justify-content: space-between; font-size: 11px; color: #888; }
        .speed-control { font-size: 14px; font-weight: bold; color: #2196f3; cursor: pointer; flex-shrink: 0; }

        .active-context-bg { background-color: #fff59d !important; border: 2px solid #fbc02d !important; box-shadow: 0 0 15px rgba(255, 241, 118, 0.5); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

<div class="tablet-frame">
    <div class="left-panel">
        <div class="pdf-header">
            <span>ğŸ“š [ë‚´ë¶„ë¹„ë‚´ê³¼] ë‹¹ë‡¨ë³‘ í•©ë³‘ì¦.pdf</span>
            <span id="headerPageNum">Page 13 / 60</span>
        </div>
        
        <div class="pdf-viewer-container">
            <div class="nav-btn nav-prev disabled" onclick="changePage(-1)">â®</div>
            <div class="nav-btn nav-next" onclick="changePage(1)">â¯</div>

            <div class="pdf-page active" id="p13" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="page-num">13</div>
                <div class="pdf-title">Chapter 4. ë‹¹ë‡¨ë³‘ì„± ì¼€í†¤ì‚°ì¦ (DKA)</div>
                <p class="pdf-text"><strong>1. ì •ì˜ ë° ê°œìš”</strong><br>ì¸ìŠë¦° ê²°í•ìœ¼ë¡œ ì¸í•œ ê³ í˜ˆë‹¹, ëŒ€ì‚¬ì„± ì‚°ì¦, ì¼€í†¤ì¦ì„ íŠ¹ì§•ìœ¼ë¡œ í•˜ëŠ” ê¸‰ì„± ëŒ€ì‚¬ í•©ë³‘ì¦ì´ë‹¤.</p>
                <p class="pdf-text"><strong>2. ë³‘íƒœ ìƒë¦¬</strong><br>ì¸ìŠë¦°ì´ ë¶€ì¡±í•˜ë©´ ì„¸í¬ê°€ í¬ë„ë‹¹ì„ ì“°ì§€ ëª»í•´ ì§€ë°©ì„ ë¶„í•´í•œë‹¤. ì´ë•Œ ê°„ì—ì„œ ì§€ë°©ì‚°ì´ ì‚°í™”ë˜ì–´ 'ì¼€í†¤ì²´'ê°€ ê³¼ë‹¤ ìƒì„±ëœë‹¤. ì´ë¡œ ì¸í•´ í˜ˆì•¡ì˜ pHê°€ ë‚®ì•„ì§€ëŠ” ëŒ€ì‚¬ì„± ì‚°ì¦ì´ ìœ ë°œëœë‹¤.</p>
                <div class="dropped-note" style="top: 350px; left: 50%;" onclick="focusChat('chat-13-2')">ğŸ”— AI ë©”ëª¨: ì¼€í†¤ì²´ ìƒì„± ì›ë¦¬</div>
            </div>
            
            <div class="pdf-page" id="p14" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="page-num">14</div>
                <div class="pdf-title">Chapter 4. DKAì˜ ì„ìƒ ì¦ìƒ</div>
                <p class="pdf-text"><strong>3. ì£¼ìš” ì¦ìƒ</strong><br>ì´ˆê¸°ì—ëŠ” ë‹¤ë‡¨, ë‹¤ìŒ, ì „ì‹  ìœ„ì•½ê°ì´ ë‚˜íƒ€ë‚˜ë©° ì ì°¨ ì˜¤ì‹¬, êµ¬í† , ë³µí†µìœ¼ë¡œ ì§„í–‰ëœë‹¤.</p>
                <p class="pdf-text">íŠ¹íˆ ì‚°ì¦ì´ ì‹¬í•´ì§€ë©´ í˜¸í¡ ë³´ìƒê¸°ì „ìœ¼ë¡œ <strong>ì¿ ìŠ¤ë§ˆìš¸ í˜¸í¡(Kussmaul Breathing)</strong>ì´ ë‚˜íƒ€ë‚˜ë©°, í˜¸ê¸° ì‹œ íŠ¹ì§•ì ì¸ ê³¼ì¼ ëƒ„ìƒˆ(ì•„ì„¸í†¤ í–¥)ê°€ ë‚œë‹¤.</p>
            </div>
            
            <div class="pdf-page" id="p15" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="page-num">15</div>
                <div class="pdf-title">Chapter 4. DKAì˜ ì¹˜ë£Œ ì›ì¹™</div>
                <p class="pdf-text"><strong>4. ì¹˜ë£Œ (Treatment)</strong><br>ì‘ê¸‰ ì¹˜ë£Œì˜ í•µì‹¬ì€ ìˆ˜ì•¡ ìš”ë²•(Hydration), ì¸ìŠë¦° íˆ¬ì—¬, ì „í•´ì§ˆ êµì •ì´ë‹¤.</p>
                <p class="pdf-text" style="background:#fff3cd; padding:10px;"><strong>â˜… ì¤‘ìš”:</strong> ì¹˜ë£Œì˜ ì²« ë‹¨ê³„ëŠ” ì ì ˆí•œ ìˆ˜ì•¡ ê³µê¸‰ì´ë‹¤. ì¸ìŠë¦° íˆ¬ì—¬ ì „, ë°˜ë“œì‹œ ì €ì¹¼ë¥¨í˜ˆì¦(Hypokalemia) ì—¬ë¶€ë¥¼ í™•ì¸í•´ì•¼ í•œë‹¤. (K+ < 3.3mEq/L)</p>
            </div>
        </div>
    </div>

    <div class="right-panel">
        <div class="tabs">
            <div class="tab active" onclick="showTab('tab-chat')">AI ì±„íŒ…</div>
            <div class="tab" onclick="showTab('tab-jokbo')">ê´€ë ¨ ì¡±ë³´</div>
            <div class="tab" onclick="showTab('tab-script')">ë…¹ìŒ ìŠ¤í¬ë¦½íŠ¸</div>
        </div>

        <div class="tab-content-container">
            <div id="tab-chat" class="tab-content active">
                <div class="chat-container">
                    <div class="msg-date">Page 13 ì§ˆë¬¸</div>
                    <div class="bubble user-msg">DKAê°€ ë­ì•¼?</div>
                    <div class="bubble ai-msg" id="chat-13-1" draggable="true" ondragstart="drag(event)">ì¸ìŠë¦° ë¶€ì¡±ìœ¼ë¡œ ì¼€í†¤ì‚°ì´ ìŒ“ì—¬ í˜ˆì•¡ì´ ì‚°ì„±í™”ë˜ëŠ” ì‘ê¸‰ ì§ˆí™˜ì…ë‹ˆë‹¤.</div>
                    <div class="bubble ai-msg" id="chat-13-2" draggable="true" ondragstart="drag(event)">ì§€ë°©ì´ ë¶„í•´ë˜ë©´ì„œ ì‚°ì„± ë¬¼ì§ˆì¸ 'ì¼€í†¤ì²´'ê°€ ë‚˜ì˜µë‹ˆë‹¤.</div>
                    <div class="msg-date">Page 14 ì§ˆë¬¸</div>
                    <div class="bubble user-msg">ì¿ ìŠ¤ë§ˆìš¸ í˜¸í¡?</div>
                    <div class="bubble ai-msg" id="chat-14-1" draggable="true" ondragstart="drag(event)">ì‚°ì„± í˜ˆì•¡ì„ ì¤‘í™”ì‹œí‚¤ë ¤ê³  ê¹Šê³  ë¹ ë¥´ê²Œ ì‰¬ëŠ” í˜¸í¡ì…ë‹ˆë‹¤.</div>
                    <div class="msg-date">Page 15 ì§ˆë¬¸</div>
                    <div class="bubble user-msg">ì¹˜ë£Œ ìš°ì„ ìˆœìœ„ëŠ”?</div>
                    <div class="bubble ai-msg" id="chat-15-1" draggable="true" ondragstart="drag(event)"><strong>ìˆ˜ì•¡(Hydration)ì´ 1ìˆœìœ„</strong>ì…ë‹ˆë‹¤. ì¹¼ë¥¨ í™•ì¸ ì „ ì¸ìŠë¦° íˆ¬ì—¬ëŠ” ìœ„í—˜í•©ë‹ˆë‹¤.</div>
                </div>
            </div>

            <div id="tab-jokbo" class="tab-content">
                <div style="color:#666; font-size:13px; margin-bottom:15px;">ê´€ë ¨ ê¸°ì¶œë¬¸ì œ</div>
                <div class="jokbo-card p13-item visible"><span class="badge">23ë…„</span> Q. DKAì˜ ë³‘íƒœìƒë¦¬ ì¤‘ ê°„ì—ì„œì˜ ì‘ìš©ì€?</div>
                <div class="jokbo-card p14-item"><span class="badge">22ë…„</span> Q. ê³¼ì¼ ëƒ„ìƒˆ, ê¹Šì€ í˜¸í¡ í™˜ìì˜ ì§„ë‹¨ì€?</div>
                <div class="jokbo-card p15-item"><span class="badge">24ë…„</span> Q. K+ 2.8ì¸ DKA í™˜ìì˜ ìš°ì„  ì²˜ì¹˜ëŠ”?</div>
            </div>

            <div id="tab-script" class="tab-content">
                <div class="script-segment" id="script-13-1">
                    <div class="script-header"><span class="speaker">í™”ì 1 (êµìˆ˜ë‹˜)</span><span class="timestamp">09:30</span></div>
                    <div class="script-text">ì, DKA ì •ì˜ ì¤‘ìš”í•©ë‹ˆë‹¤. ì¸ìŠë¦°ì´ ì—†ì–´ì„œ ëª¸ì´ ì‚°ì„±ìœ¼ë¡œ ë³€í•˜ëŠ” ê±°ì˜ˆìš”. ì¼€í†¤ì²´ ë•Œë¬¸ì´ì£ .</div>
                </div>
                <div class="script-segment" id="script-14-1">
                    <div class="script-header"><span class="speaker">í™”ì 1 (êµìˆ˜ë‹˜)</span><span class="timestamp">09:45</span></div>
                    <div class="script-text">ì¦ìƒìœ¼ë¡œëŠ” ìˆ¨ì„ í—ë–¡ì´ëŠ” ì¿ ìŠ¤ë§ˆìš¸ í˜¸í¡ì´ íŠ¹ì§•ì ì…ë‹ˆë‹¤. ì…ì—ì„œ ì•„ì„¸í†¤ ëƒ„ìƒˆê°€ ë‚˜ìš”.</div>
                </div>
                <div class="script-segment" id="script-15-1">
                    <div class="script-header"><span class="speaker">í™”ì 1 (êµìˆ˜ë‹˜)</span><span class="timestamp">10:05</span></div>
                    <div class="script-text">ì¹˜ë£Œì—ì„œ ì œì¼ ì¤‘ìš”í•œ ê±´ ì¸ìŠë¦°ì´ ì•„ë‹ˆë¼ ìˆ˜ì•¡ì…ë‹ˆë‹¤. ì¡±ë³´ì— ìì£¼ ë‚˜ì™€ìš”. ì¹¼ë¥¨ ì²´í¬ ê¼­ í•˜ì„¸ìš”.</div>
                </div>
                 <div style="height: 200px;"></div>
            </div>
        </div>

        <div class="audio-player-bar" id="audioPlayer">
            <div class="play-btn">â–¶</div>
            <div class="timeline-container">
                <div class="timeline-bar"><div class="timeline-progress" id="audioProgress"></div></div>
                <div class="time-info"><span id="currentTime">09:45</span><span>15:30</span></div>
            </div>
            <div class="speed-control">1.2x</div>
        </div>
    </div>
</div>

<script>
    // í˜ì´ì§€ ë°ì´í„° ë° ìƒíƒœ ê´€ë¦¬
    const pages = ['p13', 'p14', 'p15'];
    let currentPageIdx = 0;

    // [ê¸°ëŠ¥ 1: í˜ì´ì§€ ë³€ê²½ (ë²„íŠ¼)]
    function changePage(direction) {
        const nextIdx = currentPageIdx + direction;
        
        // ë²”ìœ„ ì²´í¬
        if (nextIdx < 0 || nextIdx >= pages.length) return;

        // í˜„ì¬ í˜ì´ì§€ ìˆ¨ê¹€
        document.getElementById(pages[currentPageIdx]).classList.remove('active');
        
        // ìƒˆ í˜ì´ì§€ ì¸ë±ìŠ¤ ì—…ë°ì´íŠ¸
        currentPageIdx = nextIdx;
        const newPageId = pages[currentPageIdx];
        
        // ìƒˆ í˜ì´ì§€ í‘œì‹œ
        document.getElementById(newPageId).classList.add('active');
        
        // í—¤ë” ë° ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        const pageNum = newPageId.replace('p', '');
        document.getElementById('headerPageNum').innerText = `Page ${pageNum} / 60`;
        
        document.querySelector('.nav-prev').classList.toggle('disabled', currentPageIdx === 0);
        document.querySelector('.nav-next').classList.toggle('disabled', currentPageIdx === pages.length - 1);

        // ì˜¤ë¥¸ìª½ íŒ¨ë„ ì‹±í¬ ì‹¤í–‰
        syncRightPanel(pageNum);
    }

    // [ê¸°ëŠ¥ 2: ì˜¤ë¥¸ìª½ íŒ¨ë„ ë™ê¸°í™”]
    function syncRightPanel(pageNum) {
        // ì¡±ë³´ í•„í„°ë§
        document.querySelectorAll('.jokbo-card').forEach(card => card.classList.remove('visible'));
        document.querySelectorAll(`.p${pageNum}-item`).forEach(card => card.classList.add('visible'));

        // ì‹±í¬ ë°ì´í„°
        const syncMap = {
            '13': { chat: 'chat-13-1', script: 'script-13-1', time: '09:30', progress: '20%' },
            '14': { chat: 'chat-14-1', script: 'script-14-1', time: '09:45', progress: '45%' },
            '15': { chat: 'chat-15-1', script: 'script-15-1', time: '10:05', progress: '70%' }
        };

        const target = syncMap[pageNum];
        if (target) {
            const activeTabId = document.querySelector('.tab-content.active').id;
            let targetElId = activeTabId === 'tab-chat' ? target.chat : (activeTabId === 'tab-script' ? target.script : null);
            
            if (targetElId) {
                const targetEl = document.getElementById(targetElId);
                if (targetEl) {
                    document.querySelector('.tab-content-container').scrollTo({ top: targetEl.offsetTop - 100, behavior: 'smooth' });
                    highlightEffect(targetEl);
                }
            }
            // í”Œë ˆì´ì–´ ì—…ë°ì´íŠ¸
            document.getElementById('currentTime').innerText = target.time;
            document.getElementById('audioProgress').style.width = target.progress;
        }
    }

    function highlightEffect(element) {
        document.querySelectorAll('.active-context-bg').forEach(el => el.classList.remove('active-context-bg'));
        element.classList.add('active-context-bg');
        setTimeout(() => { element.classList.remove('active-context-bg'); }, 2000);
    }

    // [ê¸°ëŠ¥ 3: íƒ­ ì „í™˜]
    function showTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        
        const tabs = ['tab-chat', 'tab-jokbo', 'tab-script'];
        document.querySelectorAll('.tab')[tabs.indexOf(tabId)].classList.add('active');

        const player = document.getElementById('audioPlayer');
        if (tabId === 'tab-script') player.classList.add('visible');
        else player.classList.remove('visible');
        
        // í˜„ì¬ í˜ì´ì§€ ê¸°ì¤€ìœ¼ë¡œ ë‹¤ì‹œ ì‹±í¬ ë§ì¶¤
        const currentPageNum = pages[currentPageIdx].replace('p', '');
        syncRightPanel(currentPageNum);
    }

    // [ê¸°ëŠ¥ 4: ë“œë˜ê·¸ ì•¤ ë“œë¡­ & ì—­ë§í¬]
    function drag(ev) { ev.dataTransfer.setData("chatId", ev.target.id); ev.dataTransfer.setData("text", ev.target.innerText); }
    function allowDrop(ev) { ev.preventDefault(); }
    function drop(ev) {
        ev.preventDefault();
        const chatId = ev.dataTransfer.getData("chatId"); const text = ev.dataTransfer.getData("text");
        const rect = ev.currentTarget.getBoundingClientRect();
        const note = document.createElement("div");
        note.className = "dropped-note"; note.innerHTML = `ğŸ“Œ <b>AI ë©”ëª¨</b><br>${text.substring(0, 20)}...`;
        note.style.left = (ev.clientX - rect.left) + "px"; note.style.top = (ev.clientY - rect.top) + "px";
        note.onclick = () => focusChat(chatId);
        ev.currentTarget.appendChild(note);
    }
    function focusChat(elementId) {
        showTab('tab-chat');
        const el = document.getElementById(elementId);
        if(el) {
            document.querySelector('.tab-content-container').scrollTo({ top: el.offsetTop - 100, behavior: 'smooth' });
            highlightEffect(el);
        }
    }
</script>
</body>
</html>
